
window.wopeSettings={AJAX_TIMEOUT:10000,DEBUG_MODE:true,JS_LOG_LEVEL:"debug",IS_HYBRID:true};(function(){Wopernizr=(function(){var self={};self.init=function(){};var vendorPrefixes='webkit Moz O ms'.split(' ');self.whichTransitionEvent=function(){var t;var el=document.createElement('fakeelement');var transitions={'OTransition':'otransitionend','MSTransition':'msTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd','transition':'transitionend'}
for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}};self.whichAnimationEvent=function(){var t;var el=document.createElement('fakeelement');var transitions={'animation':'animationend','WebkitAnimation':'webkitAnimationEnd'}
for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}};self.detect=function(prop){var ele=document.createElement("detect");var ucProp=prop.charAt(0).toUpperCase()+prop.substr(1);All=(prop+' '+vendorPrefixes.join(ucProp+' ')+ucProp).split(' ');for(var n=0,np=All.length;n<np;n++){if(ele.style[All[n]]==="")return All[n];}
return null;};return self;})();(function(window,undefined){"use strict";var document=window.document;var Bk=function(selector,context){context=context||document;var instance=new Bk.prototype.init(selector,context);return instance;};var test_element=document.createElement('div');var support_setStyle=(test_element.style.setProperty)?'setProperty':'setAttribute';var support_getStyle=(test_element.style.getPropertyValue)?'getPropertyValue':'setAttribute';var support_delStyle=(test_element.style.removeProperty)?'removeProperty':'removeAttribute';Bk.prototype={constructor:Bk,init:function(selector,context){this.elems=[];if(!selector){return this;}
if(selector.nodeType){this.elems[0]=this[0]=selector;this.elems.length=this.length=1;return this;}
this.elems=Bk.find(selector,context);this.length=this.elems.length;for(var i=0;i<this.length;i++){this[i]=this.elems[i];}
return this;},size:function(){return this.elems.length;},length:0,splice:[].splice,item:function(index){if(typeof index==="undefined"||index>=this.elems.length){return null;}
var elem=this.elems[index];return Bk.prototype.init(elem);},get:function(index){if(typeof index==="undefined"){if(this.size()===1){return this.elems[0];}
return this.elems;}
return this.elems[index];},isArray:function(arr){return Object.prototype.toString.call(arr)==='[object Array]';},isFunction:function(func){return Object.prototype.toString.call(func)==='[object Function]';},isString:function(func){return Object.prototype.toString.call(func)==='[object String]';}};Bk.prototype.init.prototype=Bk.prototype;Bk.ready=function(handler){Bk(document).life(Bk.Event.BK_PAGE_LOADED,handler);};Bk.prototype.append=function(){var i,j,k,elem,l,l_arg,argument,arg_elem,frag_elem=document.createDocumentFragment(),frag_sub_bk=document.createDocumentFragment();for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];for(j=0;j<arguments.length;j++){argument=arguments[j];if(elem.nodeType===1||elem.nodeType===11){if(this.isString(argument)){frag_elem.appendChild(document.createTextNode(argument));}
else if(argument.nodeType){frag_elem.appendChild(argument.cloneNode(true));}
else if(argument.elems){for(k=0,l_arg=argument.elems.length;k<l_arg;k++){arg_elem=argument.elems[k];if(arg_elem.nodeType===1||arg_elem.nodeType===11)
frag_sub_bk.appendChild(arg_elem.cloneNode(true));}
frag_elem.appendChild(frag_sub_bk);}}}
elem.appendChild(frag_elem)}
return this;};Bk.prototype.parent=function(){var i,l,elem,parent;var parents=[];for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];parent=elem.parentNode;if(parent.nodeType!==11){parents.push(parent);}}
this.elems.length=0;for(i=0,l=parents.length;i<l;i++){this.elems[i]=this[i]=parents[i];}
this.length=parents.length;return this;};Bk.prototype.prepend=function(){var i,j,k,elem,l,l_arg,argument,arg_elem,frag_elem=document.createDocumentFragment(),frag_sub_bk=document.createDocumentFragment();for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];for(j=arguments.length-1;j>=0;j--){argument=arguments[j];if(elem.nodeType===1||elem.nodeType===11){if(this.isString(argument)){frag_elem.insertBefore(document.createTextNode(argument),frag_elem.firstChild);}
else if(argument.nodeType){frag_elem.insertBefore(argument.cloneNode(true),frag_elem.firstChild);}
else if(argument.elems){for(k=0,l_arg=argument.elems.length;k<l_arg;k++){arg_elem=argument.elems[k];if(arg_elem.nodeType===1||arg_elem.nodeType===11)
frag_sub_bk.appendChild(arg_elem.cloneNode(true));}
frag_elem.insertBefore(frag_sub_bk,frag_elem.firstChild);}}}
elem.insertBefore(frag_elem,elem.firstChild);}
return this;};Bk.prototype.attr=function(name,value){var i,elem,l,nType;for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return this;}
if(value!==undefined){if(typeof elem.setAttribute!=="undefined"){if(value===false||value==null){elem.removeAttribute(name);}else{elem.setAttribute(name,value===true?name:value);}}else{elem[name]=value;}}else if(typeof elem.getAttribute!=="undefined"&&typeof elem[name]!=="boolean"){return elem.getAttribute(name);}else{return elem[name];}}
return this;};Bk.prototype.each=function(callback){var i,elem,l;for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];callback(i,elem);}
return this;};Bk.prototype.addClass=function(value){var classNames,i,l,elem,setClass,c,cl;if(value&&typeof value==="string"){classNames=value.split(/\s+/);for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value;}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(setClass.indexOf(" "+classNames[c]+" ")<0){setClass+=classNames[c]+" ";}}
elem.className=Bk.trim(setClass);}}}}
return this;};Bk.prototype.toggleClass=function(className){var i,elem,l;for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];if(elem.nodeType===1){var bk_elem=Bk(elem);bk_elem.hasClass(className)?bk_elem.removeClass(className):bk_elem.addClass(className);}}
return this;};Bk.prototype.removeClass=function(value){var removes,className,elem,c,cl,i,l;if((value&&typeof value==="string")||value===undefined){removes=(value||"").split(/\s+/);for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];if(elem.nodeType===1&&elem.className){className=(" "+elem.className+" ").replace(/[\t\r\n]/g," ");for(c=0,cl=removes.length;c<cl;c++){while(className.indexOf(" "+removes[c]+" ")>=0){className=className.replace(" "+removes[c]+" "," ");}}
elem.className=value?Bk.trim(className):"";}}}
return this;};Bk.prototype.hasClass=function(className){var cName=" "+className+" ",i=0,l=this.elems.length;for(;i<l;i++){if(this.elems[i].nodeType===1&&(" "+this.elems[i].className+" ").replace(/[\t\r\n]/g," ").indexOf(cName)>=0){return true;}}
return false;};Bk.prototype.html=function(html){var i=0,l=this.elems.length,elem;if(!html&&l>0){if(this.elems[0].nodeType===1){return this.elems[0].innerHTML;}}
try{for(;i<l;i++){elem=this.elems[i];if(elem.nodeType===1){elem.innerHTML=html;}}}
catch(e){this.empty().append(html);}
return this;};Bk.prototype.hide=function(){return this.css('display','none');};Bk.prototype.show=function(){return this.css('display',false);};Bk.prototype.css=function(name,value){var i=0,key,l=this.elems.length;for(;i<l;i++){var elem=this.elems[i];if(this.isString(name)){if(this.isString(value))
elem.style[support_setStyle](name,value);else if(value===undefined)
return elem.style[support_getStyle](name);else if(value===false)
elem.style[support_delStyle](name);}
else{for(key in name){if(name.hasOwnProperty(key)){elem.style[support_setStyle](key,name[key]);}}}}
return this;};Bk.prototype.empty=function(){var i,elem,l;for(i=0,l=this.elems.length;i<l;i++){elem=this.elems[i];elem.innerHTML='';}
return this;};Bk.prototype.height=function(height){if(typeof height==="undefined"){return this.elems[0].clientHeight;}
this.css("height",height+"px");};var canBeAttached=function(elem,event,handler){return elem.nodeType!==3&&elem.nodeType!==8&&event&&handler;}
Bk.prototype.on=function(event,handler){this.each(function(i,elem){if(canBeAttached(elem,event,handler)){Bk.Event.addListener(event,elem,handler);}});};Bk.prototype.one=function(event,handler){this.each(function(i,elem){if(canBeAttached(elem,event,handler)){(function(_elem){var callback=function(e){Bk.Event.removeListener(event,_elem,callback);handler(e);};Bk.Event.addListener(event,_elem,callback);})(elem);}});};Bk.prototype.off=function(event,handler){this.each(function(i,elem){if(canBeAttached(elem,event,handler)){Bk.Event.removeListener(event,elem,handler);}});};Bk.prototype.life=function(event,handler){this.each(function(i,elem){if(canBeAttached(elem,event,handler)){(function(_elem){Bk.Event.addListener(event,_elem,handler);Bk(document).one(Bk.Event.BK_PAGE_UNLOADED,function(){Bk.Event.removeListener(event,_elem,handler);});})(elem);}});};Bk.prototype.onOrientationChange=function(handler){return Bk.Event.onOrientationChange(handler);};Bk.prototype.load=function(url,data,complete,error,timeout){var url_data=data||null,self=this,onComplete=complete||function(){},onError=error||function(){},onTimeout=timeout||function(){},key;if(url_data&&Object.prototype.toString.call(url_data)!=='[object String]'){var str_data='';for(key in url_data){if(url_data.hasOwnProperty(key)){str_data+=data[key]+'&';}}
url_data=str_data;}
var onSuccess=function(xhr){var i=0,l=self.elems.length,remoteDoc=Bk.Ajax.getXMLResponse(xhr);for(;i<l;i++){self.elems[i].appendChild(remoteDoc.documentElement);}
onComplete(xhr);};Bk.Ajax.fetch({url:url,data:url_data,beforeSend:function(xhr){if(xhr.overrideMimeType){xhr.overrideMimeType('application/xml');}},checkResponse:false,onSuccess:onSuccess,onError:onError,onTimeout:onTimeout});return this;};Bk.ajax=function(url,settings){var data=settings.data||null,type=settings.type||"GET",onError=settings.error||function(){},onTimeout=settings.timeout||function(){},beforeSend=settings.beforeSend||function(){},key;if(data&&Object.prototype.toString.call(data)!=='[object String]'){var str_data='';for(key in data){if(data.hasOwnProperty(key)){str_data+=data[key]+'&';}}
data=str_data;}
var success=function(xhr){var data=undefined;var datatype=(settings.dataType?settings.dataType.toLowerCase():Bk.CS.TEXT);if(Bk.CS.JSON===datatype){data=JSON.parse(xhr.responseText);}else if(Bk.CS.XML===datatype){data=Bk.Ajax.getXMLResponse(xhr);}else{data=xhr.responseText;}
settings.success(data,xhr);};Bk.Ajax.fetch({"url":url,"data":data,"checkResponse":false,"onSuccess":success,"onError":onError,"onTimeout":onTimeout,"beforeSend":beforeSend,"user":settings.user,"password":settings.password,"method":type});};var transformPropName=Wopernizr.detect('transform');var transitionPropName=Wopernizr.detect('transition');var _setup=function(elems,delay){delay=delay||'1s';for(var i=0;i<elems.length;i++){elems[i].style[transitionPropName]="all "+delay+" linear";}};var Transform=function(translate){var x,y,z;var parse=translate?translate.match(/-?\d+(px|%)?/g):["0 match","0","0","0"];x=new TVal(parse[1]);y=new TVal(parse[2]);z=new TVal(parse[3]);return{translateX:function(tv){x.add(tv);return this;},translateY:function(tv){y.add(tv);return this;},toString:function(){return"translate3d("+x+","+y+","+z+")";}};};var TVal=function(val){var p=val.match(/(-?\d+)(.*)/);var _val=parseInt(p[1]);var _unit=p[2];return{add:function(other){if(_unit&&(_unit!==other.unit())){console.error("mixed units are unsupported");return;}
if(!_unit){_unit=other.unit();}
_val+=other.val();},val:function(){return _val;},unit:function(){return _unit;},toString:function(){return _val+_unit;}}};Bk.prototype.y=function(value,delay){var _elems=this.elems;_setup(_elems,delay);for(var i=0;i<_elems.length;i++){var old=new Transform(_elems[i].style[transformPropName]);var tv=new TVal(value);old.translateY(tv);_elems[i].style[transformPropName]=old.toString();}
return this;};Bk.prototype.x=function(value,delay){var _elems=this.elems;_setup(_elems,delay);for(var i=0;i<_elems.length;i++){var old=new Transform(_elems[i].style[transformPropName]);var tv=new TVal(value);old.translateX(tv);_elems[i].style[transformPropName]=old.toString();}
return this;};Bk.on=function(event,handler,element){var elt=element||document;Bk(elt).on(event,handler);};Bk.onPageLoaded=function(handler){Bk(document).on(Bk.Event.BK_PAGE_LOADED,handler);};Bk.onPageUnloaded=function(fct){Bk.Event.addListener(Bk.Event.BK_PAGE_UNLOADED,document,fct);};Bk.trim=String.prototype.trim&&!String.prototype.trim.call("\uFEFF\xA0")?function(text){return text==null?"":String.prototype.trim.call(text);}:function(text){return text==null?"":(text+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");};window.Bk=Bk;})(window);(function(window,undefined){var i,cachedruns,Expr,getText,isXML,compile,hasDuplicate,outermostContext,setDocument,document,docElem,documentIsXML,rbuggyQSA,rbuggyMatches,matches,contains,sortOrder,expando="sizzle"+-(new Date()),preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),Token=String,strundefined=typeof undefined,MAX_NEGATIVE=1<<31,arr=[],pop=arr.pop,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i;}}
return-1;},whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"NAME":new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+
whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rsibling=/[\x20\t\r\n\f]*[+~]/,rnative=/\{\s*\[native code\]\s*\}/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-0x10000;return high!==high?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);};try{slice.call(docElem.childNodes,0)[0].nodeType;}catch(e){slice=function(i){var elem,results=[];for(;(elem=this[i]);i++){results.push(elem);}
return results;};}
function isNative(fn){return rnative.test(fn+"");}
function createCache(){var cache,keys=[];return(cache=function(key,value){if(keys.push(key+=" ")>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key]=value);});}
function markFunction(fn){fn[expando]=true;return fn;}
function assert(fn){var div=document.createElement("div");try{return fn(div);}catch(e){return false;}finally{div=null;}}
function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context);}
context=context||document;results=results||[];if(!selector||typeof selector!=="string"){return results;}
if((nodeType=context.nodeType)!==1&&nodeType!==9){return[];}
if(!documentIsXML&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results;}else if((m=match[3])&&support.getByClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results;}}
if(support.qsa&&!rbuggyQSA.test(selector)){old=true;nid=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&");}else{context.setAttribute("id",nid);}
nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+groups[i].join("");}
newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",");}
if(newSelector){try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0));return results;}catch(qsaError){}finally{if(!old){context.removeAttribute("id");}}}}}
return select(selector.replace(rtrim,"$1"),context,results,seed);}
isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document;}
document=doc;docElem=doc.documentElement;documentIsXML=isXML(doc);support.tagNameNoComments=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length;});support.attributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string";});support.getByClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length){return false;}
div.lastChild.className="e";return div.getElementsByClassName("e").length===2;});support.getByName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=doc.getElementsByName&&doc.getElementsByName(expando).length===2+
doc.getElementsByName(expando+0).length;support.getIdNotName=!doc.getElementById(expando);docElem.removeChild(div);return pass;});Expr.attrHandle=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#";})?{}:{"href":function(elem){return elem.getAttribute("href",2);},"type":function(elem){return elem.getAttribute("type");}};if(support.getIdNotName){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[];}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};}else{Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[];}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId;};};}
Expr.find["TAG"]=support.tagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){for(;(elem=results[i]);i++){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;};Expr.find["NAME"]=support.getByName&&function(tag,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name);}};Expr.find["CLASS"]=support.getByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&!documentIsXML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[":focus"];if((support.qsa=isNative(doc.querySelectorAll))){assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");}
if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}});assert(function(div){div.innerHTML="<input type='hidden' i=''/>";if(div.querySelectorAll("[i^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')");}
if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled");}
div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}
if((support.matchesSelector=isNative((matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}
rbuggyQSA=new RegExp(rbuggyQSA.join("|"));rbuggyMatches=new RegExp(rbuggyMatches.join("|"));contains=isNative(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}
return false;};sortOrder=docElem.compareDocumentPosition?function(a,b){var compare;if(a===b){hasDuplicate=true;return 0;}
if((compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))){if(compare&1||a.parentNode&&a.parentNode.nodeType===11){if(a===doc||contains(preferredDoc,a)){return-1;}
if(b===doc||contains(preferredDoc,b)){return 1;}
return 0;}
return compare&4?-1:1;}
return a.compareDocumentPosition?-1:1;}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b){hasDuplicate=true;return 0;}else if(a.sourceIndex&&b.sourceIndex){return(~b.sourceIndex||MAX_NEGATIVE)-(contains(preferredDoc,a)&&~a.sourceIndex||MAX_NEGATIVE);}else if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:0;}else if(aup===bup){return siblingCheck(a,b);}
cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}
cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}
while(ap[i]===bp[i]){i++;}
return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0;};hasDuplicate=false;[0,0].sort(sortOrder);support.detectDuplicates=hasDuplicate;return document;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&!documentIsXML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&!rbuggyQSA.test(expr)){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}
return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context);}
return contains(context,elem);};Sizzle.attr=function(elem,name){var val;if((elem.ownerDocument||elem)!==document){setDocument(elem);}
if(!documentIsXML){name=name.toLowerCase();}
if((val=Expr.attrHandle[name])){return val(elem);}
if(documentIsXML||support.attributes){return elem.getAttribute(name);}
return((val=elem.getAttributeNode(name))||elem.getAttribute(name))&&elem[name]===true?name:val&&val.specified?val.value:null;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;hasDuplicate=!support.detectDuplicates;results.sort(sortOrder);if(hasDuplicate){for(;(elem=results[i]);i++){if(elem===results[i-1]){j=duplicates.push(i);}}
while(j--){results.splice(duplicates[j],1);}}
return results;};function siblingCheck(a,b){var cur=a&&b&&a.nextSibling;for(;cur;cur=cur.nextSibling){if(cur===b){return-1;}}
return a?1:-1;}
function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){for(;(node=elem[i]);i++){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}
return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}
match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[4]){match[2]=match[4];}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}
return match.slice(0,3);}},filter:{"TAG":function(nodeName){if(nodeName==="*"){return function(){return true;};}
nodeName=nodeName.replace(runescape,funescape).toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class"))||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.substr(result.length-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.substr(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}
start=dir=type==="only"&&!start&&"nextSibling";}
return true;}
start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break;}}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1];}else{while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff];}
if(node===elem){break;}}}}
diff-=last;return diff===first||(diff%first===0&&diff/first>=0);}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}
lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsXML?elem.getAttribute("xml:lang")||elem.getAttribute("lang"):elem.lang)){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":function(elem){return elem.disabled===false;},"disabled":function(elem){return elem.disabled===true;},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeName>"@"||elem.nodeType===3||elem.nodeType===4){return false;}}
return true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===elem.type);},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}
for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}
function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}
groups.push(tokens=[]);}
matched=false;if((match=rcombinators.exec(soFar))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=match[0].replace(rtrim," ");}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=type;matched.matches=match;}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&combinator.dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===true||data===cachedruns){return data===true;}}else{cache=outerCache[dir]=[dirkey];cache[1]=matcher(elem,context,xml)||cachedruns;if(cache[1]===true){return true;}}}}}};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}
postFinder(null,(matcherOut=[]),temp,xml);}
i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){return(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&tokens.slice(0,i-1).join("").replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&tokens.join(""));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",expandContext&&context.parentNode||context),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.E);if(outermost){outermostContext=context!==document&&context;cachedruns=matcherCachedRuns;}
for(;(elem=elems[i])!=null;i++){if(byElement&&elem){for(j=0;(matcher=elementMatchers[j]);j++){if(matcher(elem,context,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;cachedruns=++matcherCachedRuns;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){for(j=0;(matcher=setMatchers[j]);j++){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group){group=tokenize(selector);}
i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));}
return cached;};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}
return results;}
function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&!documentIsXML&&Expr.relative[tokens[1].type]){context=Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)[0];if(!context){return results;}
selector=selector.slice(tokens.shift().length);}
for(i=matchExpr["needsContext"].test(selector)?-1:tokens.length-1;i>=0;i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){tokens.splice(i,1);selector=seed.length&&tokens.join("");if(!selector){push.apply(results,slice.call(seed,0));return results;}
break;}}}}}
compile(selector,match)(seed,context,documentIsXML,results,rsibling.test(selector));return results;}
Expr.pseudos["nth"]=Expr.pseudos["eq"];function setFilters(){}
Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters();setDocument();Bk.find=Sizzle;Bk.expr=Sizzle.selectors;Bk.expr[":"]=Bk.expr.pseudos;Bk.unique=Sizzle.uniqueSort;Bk.text=Sizzle.getText;Bk.isXMLDoc=Sizzle.isXML;Bk.contains=Sizzle.contains;})(window);if(!document.getElementsByClassName){document.getElementsByClassName=function(cl,tag){var els,matches=[],i=0,len,regex=new RegExp('(?:\\s|^)'+cl+'(?:\\s|$)');els=document.getElementsByTagName(tag||"*");if(!els[0]){return false;}
for(len=els.length;i<len;i++){if(els[i].className.match(regex)){matches.push(els[i]);}}
return matches;};}
Bk.CS={"APPLICATION_XML":"application/xml","JSON":"json","XML":"xml","TEXT":"text"};Bk.CS.ANIMATION_NAME={"FADE":"fade","FLIP":"flip","FLIP_BACKWARDS":"flip-backwards","SLIDE":"slide","SLIDE_BACKWARDS":"slide-backwards","PARALLAX":"parallax","PARALLAX_BACKWARDS":"parallax-backwards","UNFOLD":"unfold","NONE":"none"};Bk.CS.COOKIE={"BK_HYBRID":"Bk-Hybrid"};Bk.Log=(function(){var self={};self.debug=0;self.info=1;self.warn=2;self.error=3;self.off=4;var _level=self[window.wopeSettings.JS_LOG_LEVEL];self.init=function(lewel){var level=lewel||_level;if(level>self.debug){console.debug=function(){};}
if(level>self.info){console.info=function(){};}
if(level>self.warn){console.warn=function(){};}
if(level>self.error){console.error=function(){};}};(function(){if(!window.console){window.console={};}
if(!window.console.log){window.console.log=function(){};}
if(!window.console.debug){window.console.debug=window.console.log;}
if(!window.console.info){window.console.info=window.console.log;}
if(!window.console.warn){window.console.warn=window.console.log;}
if(!window.console.error){window.console.error=window.console.log;}
self.init();})();return self;})();if(window.ActiveXObject){if(!document.ELEMENT_NODE){document.ELEMENT_NODE=1;document.ATTRIBUTE_NODE=2;document.TEXT_NODE=3;document.CDATA_SECTION_NODE=4;document.ENTITY_REFERENCE_NODE=5;document.ENTITY_NODE=6;document.PROCESSING_INSTRUCTION_NODE=7;document.COMMENT_NODE=8;document.DOCUMENT_NODE=9;document.DOCUMENT_TYPE_NODE=10;document.DOCUMENT_FRAGMENT_NODE=11;document.NOTATION_NODE=12;}
document._importNode=function(node,allChildren){switch(node.nodeType){case document.ELEMENT_NODE:var newNode=document.createElement(node.nodeName);if(node.nodeName.toLowerCase()==='input'){var value=node.getAttribute('value');}
if(node.attributes&&node.attributes.length>0){var attrsLength=node.attributes.length;for(var i=0;i<attrsLength;i++){newNode.setAttribute(node.attributes[i].nodeName,node.getAttribute(node.attributes[i].nodeName));}
if(value){newNode.value=value;}}
if(allChildren&&node.childNodes&&node.childNodes.length>0){var childNodesLength=node.childNodes.length;for(var i=0;i<childNodesLength;i++){newNode.appendChild(document._importNode(node.childNodes[i],allChildren));}}
return newNode;break;case document.TEXT_NODE:case document.CDATA_SECTION_NODE:case document.COMMENT_NODE:return document.createTextNode(node.nodeValue);break;}};}
Bk.Event=(function(){"use strict";var self={};self.PAGE_LOADED="load";self.PAGE_UNLOADED="unload";self.BK_PAGE_LOADED="bkPageLoaded";self.BK_PAGE_UNLOADED="bkPageUnloaded";self.BK_SCRIPTS_LOADED="bkScriptsLoaded";self.BK_TRANSITIONS_STARTED="bkTransitionsStarted";self.BK_TRANSITIONS_COMPLETED="bkTransitionsCompleted";self.BK_HEADER_LOADED="bkHeaderLoaded";self.BK_FOOTER_LOADED="bkFooterLoaded";self.BK_BODY_LOADED="bkBodyLoaded";self.BK_LOCATION_CHANGED="bkLocationChanged";self.BK_REMOTE_DOCUMENT_RETRIEVED="bkRemoteDocumentRetrieved";self.BK_PAGE_LOAD_REQUEST_FAILED="bkPageLoadFailed";self.BK_TABLE_SORT_LOADED="tableSort";self.BK_POPUP_BEFORE_OPEN="bkPopupBeforeOpen";self.BK_POPUP_ON_CLOSE="bkPopupOnClose";self.BK_CALENDAR_BEFORE_OPEN="bkCalendarBeforeOpen";self.BK_CALENDAR_ON_CLOSE="bkCalendarOnClose";self.BK_NODE_LOADED="bknodeloaded";self.BK_CHART_BUILT="BkChartBuilt";self.onOrientationChange=function(callback){var evtName="resize";if("orientation"in window&&"onorientationchange"in window){evtName="orientationchange";}
self.addListener(evtName,window,callback);return evtName;};self.fireEvent=function(eventName,data){var evt=document.createEvent("Event");evt.data=data;evt.initEvent(eventName,true,true);document.dispatchEvent(evt);};self.fireBkPageLoaded=function(isAjax){self.fireEvent(self.BK_PAGE_LOADED,{isAjax:isAjax});};self.fireBkPageUnloaded=function(){self.fireEvent(self.BK_PAGE_UNLOADED);};self.createAndDispatchEvent=function(eventName,elem){var evt=document.createEvent("Event");evt.initEvent(eventName,true,true);if(elem){elem.dispatchEvent(evt);return;}
document.dispatchEvent(evt);};self.getTarget=function(e){var event=e||window.event;return event.currentTarget||event.srcElement;};self.preventDefault=function(e){var event=e||window.event;if(event.preventDefault){event.preventDefault();}
event.returnValue=false;};self.addListener=function(eventName,elt,callback){if(elt.addEventListener){elt.addEventListener(eventName,callback,false);}else if(elt.attachEvent){elt.attachEvent("on"+eventName,callback);}};self.removeListener=function(eventName,elt,callback){elt=elt||window;if(elt.removeEventListener){elt.removeEventListener(eventName,callback,false);}else if(elt.detachEvent){elt.detachEvent("on"+eventName,callback);}};(function(){var isLoad;var areBkScriptsLoaded;var areBkTransitionsCompleted;var setup=function(){isLoad=false;areBkScriptsLoaded=false;areBkTransitionsCompleted=false;}
setup();var bkEventsHandler=function(evt){console.debug("Event fired: "+evt.type);if(evt.type===self.PAGE_UNLOADED||evt.type===self.BK_PAGE_UNLOADED){isLoad=false;areBkScriptsLoaded=false;areBkTransitionsCompleted=false;}else{areBkScriptsLoaded=(evt.type===self.BK_SCRIPTS_LOADED)?true:areBkScriptsLoaded;areBkTransitionsCompleted=(evt.type===self.BK_TRANSITIONS_COMPLETED)?true:areBkTransitionsCompleted;isLoad=(evt.type===self.PAGE_LOADED)?true:isLoad;if(isLoad){self.fireBkPageLoaded(false);setup();}
if(areBkScriptsLoaded&&areBkTransitionsCompleted){self.fireBkPageLoaded(true);setup();}}}
self.addListener(self.PAGE_LOADED,window,bkEventsHandler);self.addListener(self.PAGE_UNLOADED,window,bkEventsHandler);self.addListener(self.BK_SCRIPTS_LOADED,window,bkEventsHandler);self.addListener(self.BK_TRANSITIONS_COMPLETED,window,bkEventsHandler);self.addListener(self.BK_PAGE_UNLOADED,window,bkEventsHandler);}());return self;}());Bk.Event.Delegator=(function(){"use strict";var self={};var _lock=false;var _eventHandlers=[];var _isAbsolute=function(uri){return(uri!==null&&uri.match("^[a-z]+:"));};self.registerEventHandler=function(eventHandler){if(typeof eventHandler!=="function"){console.warn("Event handler should be a function.");return;}
_eventHandlers.push(eventHandler);};self.unRegisterEventHandler=function(eventHandler){_eventHandlers.filter(eventHandler);};self.getLock=function(){return _lock;}
self.handleLinkClickEvent=function(t,e){var data_bk_Ajax=t.getAttribute("data-bk-ajax");var on_click=t.getAttribute("onclick");var href=t.getAttribute("href");var data_bk_rel=t.getAttribute("data-bk-rel");if(data_bk_Ajax==="false"||on_click!==null||!href||(_isAbsolute(href)&&!window.cordova)){return;}
if(e){Bk.Event.preventDefault(e);}
if(_lock){return;}
if(data_bk_rel==="back"){window.history.back();}else{Bk.automaticTransition(t);}};self.handleButtonClickEvent=function(t,e){var data_bk_Ajax=t.getAttribute("data-bk-ajax");var form_data_bk_Ajax=t.form.getAttribute("data-bk-ajax");var action=t.form.getAttribute("action");var on_click=t.getAttribute("onclick");if(data_bk_Ajax==="false"||form_data_bk_Ajax==="false"||_isAbsolute(action)||on_click!==null){return;}
Bk.Event.preventDefault(e);if(_lock){return;}
Bk.automaticTransition(t);};self.isTransitionAlreadyProcessing=function(){return _lock;};self.clickListener=function(e){if(e.button&&e.button>1){return;}
e=e||window.event;var target=e.target||e.srcElement;for(var i=0;i<_eventHandlers.length;i++){var eventHandler=_eventHandlers[i];if(eventHandler(target)){Bk.Event.preventDefault(e);return;}}
if(target.nodeName.toLowerCase()=="input"){var type=target.getAttribute("type");if(type&&(type.toLowerCase()==="image"||type.toLowerCase()==="submit")){self.handleButtonClickEvent(target,e);}
return;}
if(target.nodeName.toLowerCase()=="a"){self.handleLinkClickEvent(target,e);return;}
var link=Bk.Dom.findParentNode("a",target);if(link){self.handleLinkClickEvent(link,e);return;}
return false;};(function(){Bk.Event.addListener(Bk.Event.BK_PAGE_LOADED,document,function(){_eventHandlers.splice();});Bk.Event.addListener(Bk.Event.BK_TRANSITIONS_STARTED,document,function(){_lock=true;});Bk.Event.addListener(Bk.Event.BK_TRANSITIONS_COMPLETED,document,function(){_lock=false;});Bk.Event.addListener("click",document,self.clickListener);}());return self;}());Bk.Overlay=(function(){var self={};var Cs={};Cs.ID="bk-overlay";Cs.CLOSE="bk-overlay-closed";Cs.OPEN="bk-overlay-open";self.setOverlaySize=function(){var _overlay=Bk.Dom.getElementById(Cs.ID);_overlay.style.height=0;_overlay.style.height=Bk.Util.getDocumentHeight()+'px';};self.showOverlay=function(){var _overlay=Bk.Dom.getElementById(Cs.ID);Bk.Dom.removeClass(_overlay,Cs.CLOSE);Bk.Dom.addClass(_overlay,Cs.OPEN);self.setOverlaySize();if(document.body.style.webkitFilter!==undefined){if(Bk.Header.isPresent()){Bk.Dom.addClass(document.getElementById("bk-header"),"bk-blur");}
if(Bk.Footer.isPresent()){Bk.Dom.addClass(document.getElementById("bk-footer"),"bk-blur");}
if(Bk.Parallax.isPresent()){Bk.Dom.addClass(document.getElementById("bk-parallax-wrapper"),"bk-blur");}
Bk.Dom.addClass(document.getElementById("bk-body"),"bk-blur");}};self.hideOverlay=function(){var _overlay=Bk.Dom.getElementById(Cs.ID);Bk.Dom.removeClass(_overlay,Cs.OPEN);Bk.Dom.addClass(_overlay,Cs.CLOSE);_overlay.style.height=0;if(document.body.style.webkitFilter!==undefined){if(Bk.Header.isPresent()){Bk.Dom.removeClass(document.getElementById("bk-header"),"bk-blur");}
if(Bk.Footer.isPresent()){Bk.Dom.removeClass(document.getElementById("bk-footer"),"bk-blur");}
if(Bk.Parallax.isPresent()){Bk.Dom.removeClass(document.getElementById("bk-parallax-wrapper"),"bk-blur");}
Bk.Dom.removeClass(document.getElementById("bk-body"),"bk-blur");}};return self;})();Bk.Body=(function(){"use strict";var self={};var id=self.id="bk-body";self.getId=function(){return id;};self.load=function(){return Bk.Dom.getElementById(id);};self.matches=function(otherId){return id===otherId;};return self;}());Bk.Header=(function(){"use strict";var self={};var ID="bk-header";var _addClass=function(){if(document.getElementById(ID)){Bk.Dom.addClass(document.getElementById(ID),"bk-fixed");}};var _removeClass=function(){if(document.getElementById(ID)){Bk.Dom.removeClass(document.getElementById(ID),"bk-fixed");}};var _addPadding=function(body){var height=self.height()+"px";body.style.setProperty("padding-top",height);};var _removePadding=function(body){body.style.setProperty("padding-top","0px");};self.isFixed=function(){var header=document.getElementById(ID);if(header){return header.getAttribute("data-bk-position")==="fixed";}
return false;};self.isPresent=function(){return document.getElementById(ID)!==null;};self.find=function(){return document.getElementById(ID);};self.height=function(){if(document.getElementById(ID)){return document.getElementById(ID).clientHeight;}
return 0;};self.update=function(remoteDocument){if(Bk.hideHeader){return;}
var remote=Bk.Dom.importElement(remoteDocument,ID);var _headerElement=document.getElementById(ID);if(_headerElement){if(remote){_headerElement.parentNode.replaceChild(remote,_headerElement);}else{_headerElement.parentNode.removeChild(_headerElement);}}else if(remote){document.body.insertBefore(remote,document.body.firstChild);}
if(_headerElement||remote){Bk.Event.fireEvent(Bk.Event.BK_HEADER_LOADED,{header:_headerElement});}};self.fixed=function(){_addClass();_addPadding(Bk.Dom.getElementById("bk-body"));};self.unfixed=function(){_removeClass();_removePadding(Bk.Dom.getElementById("bk-body"));};(function(){Bk(document).on(Bk.Event.BK_PAGE_LOADED,function(e){if(self.isFixed()){self.fixed();}});Bk(document).on(Bk.Event.BK_HEADER_LOADED,function(){if(self.isFixed()){_addClass();}});Bk(document).on(Bk.Event.BK_BODY_LOADED,function(e){if(self.isFixed()){_addPadding(e.data.body);}});var fixAndroid4OnOverlayOpen=function(){if(Bk.Util.isAndroid("4.0")&&self.isFixed()){console.debug("Workaround Android 4.0: disabling header fixed position before pop up opening.");self.unfixed();}};var fixAndroid4OnOverlayClose=function(){if(Bk.Util.isAndroid("4.0")&&self.isFixed()){console.debug("Workaround Android 4.0: enabling header fixed position after pop up closing.");self.fixed();}};Bk(document).on(Bk.Event.BK_POPUP_BEFORE_OPEN,fixAndroid4OnOverlayOpen);Bk(document).on(Bk.Event.BK_POPUP_ON_CLOSE,fixAndroid4OnOverlayClose);Bk(document).on(Bk.Event.BK_CALENDAR_BEFORE_OPEN,fixAndroid4OnOverlayOpen);Bk(document).on(Bk.Event.BK_CALENDAR_ON_CLOSE,fixAndroid4OnOverlayClose);})();return self;}());Bk.Footer=(function(){"use strict";var self={};var ID="bk-footer";var _isFixed=function(){if(document.getElementById(ID)){var position=document.getElementById(ID).getAttribute("data-bk-position");return position==="fixed";}
return false;};var _addClass=function(){if(document.getElementById(ID)){Bk.Dom.addClass(document.getElementById(ID),"bk-fixed");_unstick();}};var _removeClass=function(){if(document.getElementById(ID)){Bk.Dom.removeClass(document.getElementById(ID),"bk-fixed");}};var _addPadding=function(body){var height=self.height()+"px";body.style.setProperty("padding-bottom",height);};var _removePadding=function(body){body.style.setProperty("padding-bottom","0px");};self.isPresent=function(){return document.getElementById(ID)!==null;};self.find=function(){return document.getElementById(ID);};self.height=function(){if(document.getElementById(ID)){return document.getElementById(ID).clientHeight;}
return 0;};self.update=function(remoteDocument){if(Bk.hideFooter){return;}
var remote=Bk.Dom.importElement(remoteDocument,ID);var footerElement=document.getElementById(ID);if(footerElement){if(remote){footerElement.parentNode.replaceChild(remote,footerElement);}else{footerElement.parentNode.removeChild(footerElement);}}else if(remote){var next=Bk.Loader.load().nextSibling;if(next&&next.id!=="bk-body"){next=null;}
document.body.insertBefore(remote,next);}
if(footerElement||remote){Bk.Event.fireEvent(Bk.Event.BK_FOOTER_LOADED,{footer:footerElement});}};self.fixed=function(){_addClass();_addPadding(Bk.Dom.getElementById("bk-body"));};self.unfixed=function(){_removeClass();_removePadding(Bk.Dom.getElementById("bk-body"));};var _stick=function(){var fheight=self.height();Bk(".bk-wrapper").css('margin','0 auto -'+fheight+'px');Bk(".bk-footerpush").css('height',fheight+'px');if(self.isPresent()){Bk(self.find()).css('height',fheight+'px');}};var _unstick=function(){Bk(".bk-wrapper").css('margin',false);Bk(".bk-footerpush").css('height',false);if(self.isPresent()){Bk(self.find()).css('height',false);}};(function(){Bk(document).on(Bk.Event.BK_PAGE_LOADED,function(e){if(_isFixed()){self.fixed();}else{_stick();}});Bk.Event.onOrientationChange(function(){if(!_isFixed()){setTimeout(function(){_unstick();_stick();},250);}});var fixAndroid4OnOverlayOpen=function(){if(Bk.Util.isAndroid("4.0")&&_isFixed()){console.debug("Workaround Android 4.0: disabling footer fixed position before pop up opening.");self.unfixed();}};var fixAndroid4OnOverlayClose=function(){if(Bk.Util.isAndroid("4.0")&&_isFixed()){console.debug("Workaround Android 4.0: enabling footer fixed position after pop up closing.");self.fixed();}};Bk(document).on(Bk.Event.BK_POPUP_BEFORE_OPEN,fixAndroid4OnOverlayOpen);Bk(document).on(Bk.Event.BK_POPUP_ON_CLOSE,fixAndroid4OnOverlayClose);Bk(document).on(Bk.Event.BK_CALENDAR_BEFORE_OPEN,fixAndroid4OnOverlayOpen);Bk(document).on(Bk.Event.BK_CALENDAR_ON_CLOSE,fixAndroid4OnOverlayClose);})();return self;})();Bk.Loader=(function(){"use strict";var self={};var id="bk-main-loader";var node;Bk.onPageLoaded(function(){node=Bk.Dom.getElementById(id);});self.getId=function(){return id;};self.isPresent=function(){return node!==null;};self.load=function(){return node;};self.updateHeightProp=function(loaderElement){loaderElement.style.height=_computeHeight()+"px";loaderElement.style.display='table';};self.update=function(newLoaderEle){var oldLoaderEle=document.getElementById(id);if(newLoaderEle){oldLoaderEle.parentNode.replaceChild(newLoaderEle,oldLoaderEle);}
node=newLoaderEle;};var _computeHeight=function(){var bkBody=Bk.Body.load();var bkHeader=Bk.Header.find();var bkFooter=Bk.Footer.find();var bkHeaderHeight=0,bkFooterHeight=0;if((bkHeader&&bkFooter&&bkBody)&&(Bk.Util.getScreenHeight()>bkBody.clientHeight)){return bkBody.clientHeight;}
if(bkHeader){bkHeaderHeight=bkHeader.clientHeight;}
if(bkFooter){bkFooterHeight=bkFooter.clientHeight;}
return Bk.Util.getScreenHeight()-(bkHeaderHeight+bkFooterHeight);};return self;}());var deltax="260px";var deltatransition=300;var breakpoint=1023;Bk.Aside=(function(){var self={};var _orientationChangeEventName="";var _transformPropName=window.Wopernizr.detect('transform');var ASIDE_CONTENT_WRAPPER_ID="bk-aside-content-wrapper";var ASIDE_CONTENT_ID="bk-aside-content";var ASIDE_MENU_ID="bk-aside-clicker";self.asideGetStatus=function(){var clicker=document.getElementById(ASIDE_MENU_ID);if(!clicker){console.warn("Aside menu not found. Aborting!");return"absent";}
if(Bk.Dom.hasClass(clicker,"asidemenuopened")&&!(Bk.Dom.hasClass(clicker,"asidemenuclosed"))&&!(Bk.Dom.hasClass(clicker,"asidemenudefaultopened"))){return"opened";}else if(Bk.Dom.hasClass(clicker,"asidemenudefaultopened")&&!(Bk.Dom.hasClass(clicker,"asidemenuclosed"))&&!(Bk.Dom.hasClass(clicker,"asidemenuopened"))){return"defaultopened";}else if(Bk.Dom.hasClass(clicker,"asidemenuclosed")&&!(Bk.Dom.hasClass(clicker,"asidemenudefaultopened"))&&!(Bk.Dom.hasClass(clicker,"asidemenuopened"))){return"closed";}else{return"classesmixed";}};self.present=function(){return Bk.Dom.getElementById(ASIDE_MENU_ID)!==null;};self.updateColumn=function(remoteDocument){var remoteColumn=Bk.Dom.getElementById(ASIDE_MENU_ID,remoteDocument);var column=Bk.Dom.getElementById(ASIDE_MENU_ID);remoteColumn=Bk.Dom.importNode(remoteColumn,true);column.parentNode.replaceChild(remoteColumn,column);};self.extractPopupsToBody=function(remoteDocument){var popups=remoteDocument.getElementsByClassName("bk-popup-wrapper");popups.forEach(function(elem){var popup=Bk.Dom.importNode(elem,true);document.body.appendChild(popup);});};self.getComponents=function(){var components={};components.asideContentWrapperEle=document.getElementById(ASIDE_CONTENT_WRAPPER_ID);if(!components.asideContentWrapperEle){components.error="✘ Aside content wrapper not found!";return components;}
components.asideContentEle=document.getElementById(ASIDE_CONTENT_ID);if(!components.asideContentEle){components.error="✘ Aside content not found!";return components;}
components.clicker=document.getElementById(ASIDE_MENU_ID);if(!components.clicker){components.error="✘ Aside menu not found!";return components;}
return components;};_onOrientationChange=function(components){if(window.innerWidth>breakpoint){self.flattenMenu(components.clicker);self.hackToKeepOutsiderElementsVisible(components);var transformPropertyValue='translate3d(0 ,0 , 0)';components.asideContentEle.style[_transformPropName]=components.clicker.style[_transformPropName]=transformPropertyValue;}else{self.resetHack(components);if(window.innerWidth<=breakpoint&&Bk.Dom.hasClass(components.clicker,"asidemenuopened")){Bk.Dom.removeClass(components.clicker,"asidemenudefaultopened");}else if(window.innerWidth<=breakpoint&&!(Bk.Dom.hasClass(components.clicker,"asidemenuopened"))){Bk.Dom.removeClass(components.clicker,"asidemenudefaultopened");Bk.Dom.addClass(components.clicker,"asidemenuclosed");}}}
self.onOrientationChange=function(){var components=self.getComponents();if(components.error){console.log(components.error);return;}
if(Bk.Util.isAndroidStock){setTimeout(function(){_onOrientationChange(components);},250);}else{_onOrientationChange(components);}};self.flattenMenu=function(clicker){Bk.Dom.addClass(clicker,"asidemenudefaultopened");Bk.Dom.removeClass(clicker,"asidemenuopened");Bk.Dom.removeClass(clicker,"asidemenuclosed");};self.registerMenuBtnClickListener=function(){var asideBtns=Bk.Dom.getElementsByAttribute(document.body,"*","data-bk-role","slide-menu-button");if(!asideBtns||!asideBtns.length){console.warn("Aside button(s) not found. Aborting!");return;}
Bk.Event.Delegator.registerEventHandler(function(target){var asideBtns=Bk.Dom.getElementsByAttribute(document.body,"*","data-bk-role","slide-menu-button");for(var i=0;i<asideBtns.length;i++){if(target===asideBtns[0]){Bk.Aside.asideBtnClickListener();return true;}
var link=Bk.Dom.findParentNode("a",target);if(link===asideBtns[0]){Bk.Aside.asideBtnClickListener();return true;}}});};self.asideBtnClickListener=function(){var asideContentWrapperEle=document.getElementById(ASIDE_CONTENT_WRAPPER_ID);var clicker=document.getElementById(ASIDE_MENU_ID);if(asideContentWrapperEle!==null&&clicker!==null){if(Bk.Dom.hasClass(clicker,"asidemenuclosed")&&window.innerWidth<=breakpoint){Bk.Aside.open();}else if(Bk.Dom.hasClass(clicker,"asidemenuopened")&&window.innerWidth<=breakpoint){Bk.Aside.close();}}else{console.log("aside menu/content not found!");}
return false;};self.open=function(){var asideContentEle=document.getElementById(ASIDE_CONTENT_ID);if(!asideContentEle){console.warn("Aside content not found. Aborting!");return;}
var clicker=document.getElementById(ASIDE_MENU_ID);if(!clicker){console.warn("Aside menu not found. Aborting!");return;}
Bk.Dom.removeClass(clicker,"asidemenuclosed");Bk.Dom.removeClass(clicker,"asidemenudefaultopened");var transformPropertyValue='translate3d('+deltax+' ,0, 0)';clicker.style[_transformPropName]=asideContentEle.style[_transformPropName]=transformPropertyValue;setTimeout(function(){Bk.Dom.addClass(clicker,"asidemenuopened");},deltatransition);return false;};self.close=function(){var asideContentEle=document.getElementById(ASIDE_CONTENT_ID);if(!asideContentEle){console.warn("Aside content not found. Aborting!");return;}
var clicker=document.getElementById(ASIDE_MENU_ID);if(!clicker){console.warn("Aside menu not found. Aborting!");return;}
Bk.Dom.removeClass(clicker,"asidemenuopened");Bk.Dom.removeClass(clicker,"asidemenudefaultopened");var transformPropertyValue='translate3d(0 ,0 , 0)';asideContentEle.style[_transformPropName]=clicker.style[_transformPropName]=transformPropertyValue;setTimeout(function(){Bk.Dom.addClass(clicker,"asidemenuclosed");},deltatransition);};self.onClickListener=function(e){var target=e.data.source;if(!target){return;}
if(Bk.Aside.present()){var parentNode=Bk.Dom.findParentNodeByAttr("id",ASIDE_CONTENT_ID,target);if(parentNode===document.getElementById(ASIDE_CONTENT_ID)){self.close();}}else{console.log("✘ This clickListener should not be called");}};self.resetHack=function(components){components.asideContentWrapperEle.style.marginLeft="0";};self.onBkChartBuild=function(e){var components=self.getComponents();if(components.error){console.log(components.error);return;}
if(window.innerWidth<=breakpoint){self.resetHack(components);}else{self.hackToKeepOutsiderElementsVisible(components);}};self.hackToKeepOutsiderElementsVisible=function(components){var contentWrapperHeight=components.asideContentWrapperEle.offsetHeight;var menuHeight=components.clicker.offsetHeight;console.log("contentWrapperHeight: "+contentWrapperHeight+" menuHeight: "+menuHeight);if(contentWrapperHeight>menuHeight){components.clicker.style.position="absolute";components.asideContentWrapperEle.style.position="static";components.asideContentWrapperEle.style.marginLeft="260px";}else{console.log("menu bigger than content");}};self.init=function(){var components=self.getComponents();if(components.error){return;}
if(window.innerWidth<=breakpoint){Bk.Dom.addClass(components.clicker,"asidemenuclosed");}else if(window.innerWidth>breakpoint){Bk.Aside.flattenMenu(components.clicker);self.hackToKeepOutsiderElementsVisible(components);}
self.registerMenuBtnClickListener();Bk.Event.addListener(Bk.Event.BK_TRANSITIONS_STARTED,document,self.onClickListener);_orientationChangeEventName=Bk.Event.onOrientationChange(self.onOrientationChange);Bk.Event.addListener(Bk.Event.BK_CHART_BUILT,document,self.onBkChartBuild);Bk.Event.addListener(Bk.Event.BK_PAGE_UNLOADED,document,self.destroy);};self.destroy=function(){Bk.Event.removeListener(Bk.Event.BK_TRANSITIONS_STARTED,document,self.onClickListener);Bk.Event.removeListener(_orientationChangeEventName,window,self.onOrientationChange);Bk.Event.removeListener(Bk.Event.BK_CHART_BUILT,document,self.onBkChartBuild);Bk.Event.removeListener(Bk.Event.BK_PAGE_UNLOADED,document,self.destroy);};(function(){Bk.Event.addListener(Bk.Event.BK_PAGE_LOADED,document,self.init);})();return self;})();Bk.Popup=(function(){var self={};var _node=null;var _onOrientationChangeEventName="resize";var _init=function(id){_node=Bk.Dom.getElementById(id);_onOrientationChangeEventName=Bk.Event.onOrientationChange(_onOrientationChangeHandler);Bk(document).one(Bk.Event.BK_PAGE_UNLOADED,self.close);if(document.body.style.webkitFilter!==undefined){Bk(document).one(Bk.Event.BK_PAGE_UNLOADED,function(e){var wrappers=document.getElementsByClassName("bk-popup-wrapper");for(var i=0;i<wrappers.length;i++){var w=wrappers[i];w.parentNode.removeChild(w);}})}};var _onOrientationChangeHandler=function(){if(_node){_positionPopup();Bk.Overlay.setOverlaySize();}};var _enableClickOnChildsOrDie=function(e){e=e||window.event;var t=e.target||e.srcElement;if(Bk.Dom.findParentNodeByAttr('id',_node.getAttribute('id'),t)){Bk.Event.Delegator.clickListener(e);}else{Bk.Popup.close();Bk.Event.preventDefault(e);}};var _destroy=function(){Bk.Event.removeListener(_onOrientationChangeEventName,window,_onOrientationChangeHandler);if(window.ActiveXObject){Bk.Event.addListener("click",document,Bk.Event.Delegator.clickListener);Bk.Event.removeListener("click",document,_enableClickOnChildsOrDie);}
_node=null;_headerPosFixedFound=false;_footerPosFixedFound=false;};var _positionPopup=function(){var windowHeight=window.innerHeight;var popupHeight=_node.clientHeight;if(windowHeight>popupHeight){_node.style.top=Bk.Util.computeTopPosition(_node)+"px";}else{_node.style.top=Bk.Util.getScrollOffset()+"px";}}
var _hidePopup=function(){if(_node){_node.style.display="none";}};var _isOpenAction=function(target){var attrName="data-bk-rel";var attrValue="popup";return(target.getAttribute(attrName)===attrValue)||Bk.Dom.findParentNodeByAttr(attrName,attrValue,target);};var _isCloseAction=function(target){if(target.nodeName.toLowerCase()==="div"&&target.getAttribute("id")==="bk-overlay"){return true;}
if(target.nodeName.toLowerCase()==="a"&&target.getAttribute("data-bk-rel")==="close"){return true;}
var parent=Bk.Dom.findParentNode("a",target);if(parent&&parent.getAttribute("data-bk-rel")==="close"){return true;}
return false;};var _isOpened=function(){return _node!==null;};var _handleClickEvent=function(target){if(_isCloseAction(target)){self.close();return true;}
if(_isOpenAction(target)){var id=_retrievePopupIdFromClickedTarget(target);self.open(id);return true;}
return false;};var _retrievePopupIdFromClickedTarget=function(target){var ATTRIBUTE_NAME="data-bk-rel";var ATTRIBUTE_VALUE="popup";var _target;if(target.getAttribute(ATTRIBUTE_NAME)===ATTRIBUTE_VALUE){_target=target;}else{_target=Bk.Dom.findParentNodeByAttr(ATTRIBUTE_NAME,ATTRIBUTE_VALUE,target);}
return _target.getAttribute("href").replace("#","");};self.open=function(id){if(_isOpened()){console.warn("Cannot open popup with id:"+id+", because a pop up is already opened.")
return;}
_init(id);_node.style.display="block";var body=document.getElementsByTagName("body")[0];var _show=function(){_node.style.visibility="visible";_positionPopup();Bk.Overlay.showOverlay();if(document.body.style.webkitFilter!==undefined){var wrapper=document.querySelector("div[class='bk-popup-wrapper'][id='"+_node.id+"']");wrapper.parentNode.removeChild(wrapper);body.appendChild(wrapper);}};var chartNodes=Bk.Dom.getElementsByAttribute(_node,"div","data-bk-role","bkchart");if(chartNodes.length>0&&!(Bk.Util.isAndroidStock()&&Bk.Util.getOSInfo().osVersion.indexOf("2.3")>-1)){_node.style.visibility="hidden";Bk.Event.fireEvent(Bk.Event.BK_POPUP_BEFORE_OPEN,{"id":_node.id,"callback":_show});}else{Bk.Event.fireEvent(Bk.Event.BK_POPUP_BEFORE_OPEN,{"id":_node.id});_show();}
if(window.ActiveXObject){Bk.Event.removeListener("click",document,Bk.Event.Delegator.clickListener);Bk.Event.addListener("click",document,_enableClickOnChildsOrDie);}};self.close=function(){if(_isOpened()){Bk.Event.fireEvent(Bk.Event.BK_POPUP_ON_CLOSE,{"id":_node.id});Bk.Overlay.hideOverlay();_hidePopup();_destroy();}};(function(){Bk(document).one(Bk.Event.BK_PAGE_LOADED,function(){Bk.Event.Delegator.registerEventHandler(_handleClickEvent);});}());return self;}());Bk.Parallax=(function(){var transformPropName=Wopernizr.detect('transform');var _height=function(ids){var sum=0;for(var i=0;i<ids.length;i++){if(document.getElementById(ids[i])){sum+=document.getElementById(ids[i]).offsetHeight;}}
return sum;};var _resizeParallaxBackgroundLayer=function(){if(document.getElementById('bk-parallax-wrapper')){var parallax=Bk('#bk-parallax');if(parallax.length>0){setTimeout(function(){var sum=_height(["bk-header","bk-body","bk-footer"]);var h=Math.max(sum,window.innerHeight);parallax.css({'width':window.innerWidth*5+'px','height':h+'px'});Bk.Util.forceRepaint(10);},350);}}};var _update=function(remoteDocument){var localParallax=document.getElementById('bk-parallax-wrapper');var remoteParallax=remoteDocument.getElementById('bk-parallax-wrapper');if(!localParallax){if(remoteParallax){var remote=Bk.Dom.importElement(remoteDocument,'bk-parallax-wrapper');document.body.insertBefore(remote,document.body.firstChild);}}else if(!remoteParallax){localParallax.parentNode.removeChild(localParallax);}};(function(){Bk(document).one(Bk.Event.BK_PAGE_LOADED,function(){_resizeParallaxBackgroundLayer();});Bk(document).on(Bk.Event.BK_TRANSITIONS_COMPLETED,function(){_resizeParallaxBackgroundLayer();});Bk.Event.onOrientationChange(_resizeParallaxBackgroundLayer);Bk(document).on(Bk.Event.BK_REMOTE_DOCUMENT_RETRIEVED,function(e){_update(e.data.remoteDocument);});}());return{animate:function(elt,isBack,oldStyle,newPos,direction){var _translate;if(isBack){if(oldStyle){Bk(elt).get().style[transformPropName]='translate3d('+oldStyle+'px,0px,0px)';}else{Bk(elt).attr('style','height:'+elt.style.height);}}else{if(newPos.indexOf('%')!==-1){_translate=Math.floor(((newPos.replace('%',''))*window.innerWidth)/100);}else{_translate=parseInt(newPos.replace('px',''));}
var _t=oldStyle?(oldStyle+(direction*_translate)):(direction*_translate);elt.style[transformPropName]='translate3d('+_t+'px, 0px, 0px)';}},isPresent:function(){return document.getElementById("bk-parallax-wrapper")!==null;}};}());Bk.infiniteScroll=function(){var self={};var _watcherId=0;var _timer=0;var _isVisible=false;var _fetchMoreElement;self.widgetElement=null;var _isElementInViewport=function(ele){var rect=ele.getBoundingClientRect();return(rect.top>=0&&rect.left>=0&&rect.bottom<=window.innerHeight&&rect.right<=window.innerWidth);};var _Net=function(){var This={};This.remoteContentId="";This.animationName="";This.widgetElement=null;This.loaderElement=null;This.onSuccess=function(data,xhr){var remoteContentEle=Bk.Dom.importElement(data,This.remoteContentId);var remoteWidgetEle=Bk.Dom.importElement(data,This.widgetElement.getAttribute("id"));if(This.animationName){var animationFn=Bk.animation.impl(This.animationName);animationFn({"oldBox":This.loaderElement,"newBox":remoteContentEle,"newBoxTransitionEnd":function(e){if(!remoteWidgetEle)return;e=e||window.event;var newBox=e.target||e.srcElement;newBox.parentNode.insertBefore(remoteWidgetEle,newBox.nextSibling);var instance=new Bk.infiniteScroll();instance.init(remoteWidgetEle);}});}else{var fragment=document.createDocumentFragment();if(remoteContentEle){fragment.appendChild(remoteContentEle);}
if(remoteWidgetEle){fragment.appendChild(remoteWidgetEle);}
This.loaderElement.parentNode.replaceChild(fragment,This.loaderElement);if(remoteWidgetEle){var instance=new Bk.infiniteScroll();instance.init(remoteWidgetEle);}}};This.onError=function(){This.loaderElement.parentNode.replaceChild(This.widgetElement,This.loaderElement);self.init(This.widgetElement);};return This;};var _fetchMore=function(){var url=_fetchMoreElement.getAttribute("href");var animationName=_fetchMoreElement.getAttribute("data-bk-animation");console.debug("→ Running load more from instance: "+self.stringify());var loaderId=_fetchMoreElement.getAttribute("data-bk-loader")||"bk-main-loader";var loaderElement=Bk("#"+loaderId)[0];var loaderElementClone=loaderElement.cloneNode(true);loaderElementClone.setAttribute("id",loaderElementClone.getAttribute("id")+"_clone");var widgetElementClone=self.widgetElement.cloneNode(true);self.widgetElement.parentNode.replaceChild(loaderElementClone,self.widgetElement);loaderElementClone.style.display="";var net=new _Net();net.remoteContentId=Bk.Url.extractFragment(url);net.animationName=animationName;net.widgetElement=widgetElementClone;net.loaderElement=loaderElementClone;Bk.ajax(Bk.Url.dropFragment(url),{"success":net.onSuccess,"error":net.onError,"timeout":net.onError,"dataType":Bk.CS.XML,"beforeSend":Bk.Ajax.expectXML});};var _checkVisibilityChangeAndMayfetchMore=function(){console.log("→ scroll 'finished' since 100ms");if(_isVisible){return _watch(_fetchMoreElement);}
if(_isElementInViewport(_fetchMoreElement)){console.log("★ visibility state change occured");self.destroy();_fetchMore();}};var _onscroll=function(){if(_watcherId){clearTimeout(_watcherId);}
if(_timer){clearTimeout(_timer);}
_timer=setTimeout(_checkVisibilityChangeAndMayfetchMore,100);};var _watch=function(ele){_watcherId=setInterval(function(){_isVisible=_isElementInViewport(ele);},250);};var _clickHandler=function(target){if(_fetchMoreElement===target){console.log("★ Handling click event");self.destroy();_fetchMore();return true;}
return false;};self.destroy=function(){console.log("✘ Killing for the following instance: "+self.stringify());clearTimeout(_watcherId);clearTimeout(_timer);Bk(document).off("scroll",_onscroll);Bk(document).off(Bk.Event.BK_PAGE_UNLOADED,self.onBkPageUnloaded);Bk.Event.Delegator.unRegisterEventHandler(_clickHandler);};self.init=function(widgetEle){if(widgetEle){self.widgetElement=widgetEle;}
if(!self.widgetElement.getAttribute("id")){console.warn("→ The widgetElement does not have an id. Aborting!");return;}
if(!self.widgetElement.parentNode){console.warn("→ The widgetElement does not seem to be attached to the DOM anymore. Aborting!");return;}
var fetchMoreBox=Bk.find("a[data-bk-rel=infinite-scroll]",self.widgetElement);if(!fetchMoreBox){console.warn("→ fetchMoreBox was not found. Aborting!");return;}
_fetchMoreElement=fetchMoreBox[0];_watch(_fetchMoreElement);Bk(document).on("scroll",_onscroll);Bk(document).on(Bk.Event.BK_PAGE_UNLOADED,self.onBkPageUnloaded);Bk.Event.Delegator.registerEventHandler(_clickHandler);console.log("→ Successful init of "+self.stringify());};self.onBkPageUnloaded=function(e){Bk(document).off(Bk.Event.BK_PAGE_UNLOADED,self.onBkPageUnloaded);self.destroy();}
self.stringify=function(){var msg="infinite-scroll widget: ";if(!self.widgetElement){console.warn("→ self.widgetElement is not truthy");}
if(!_fetchMoreElement){console.warn("→ _fetchMoreElement is not truthy");}
var json={"widgetElement":{"id":self.widgetElement?self.widgetElement.getAttribute("id"):""},"_fetchMoreElement":{"href":_fetchMoreElement?_fetchMoreElement.getAttribute("href"):""}};msg+=JSON.stringify(json);return msg;};return self;};(function(){var boot=function(){var widgetElements=Bk("div[data-bk-role=infinite-scroll]");widgetElements.each(function(i,widgetEle){var instance=new Bk.infiniteScroll();instance.init(widgetEle);});};Bk(document).on(Bk.Event.BK_PAGE_LOADED,boot);})();Bk.Util=(function(){var self={};self.isNull=function(elt){return elt==null||typeof(elt)==='undefined';};self.isWindow=function(obj){return obj&&typeof obj==="object"&&"setInterval"in obj;};self.getWindow=function(elem){return Bk.Util.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;};self.getClassName=function(obj){if(obj&&obj.constructor&&obj.constructor.toString){var arr=obj.constructor.toString().match(/function\s*(\w+)/);if(arr&&arr.length==2){return arr[1];}}
return undefined;};self.isArray=function(obj){return(obj.constructor.toString().indexOf("Array")!==-1);};self.getScreenHeight=function(){var screenHeight=0;if(typeof(window.innerHeight)=='number'){screenHeight=window.innerHeight;}else if(document.documentElement&&(document.documentElement.clientHeight)){screenHeight=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientHeight)){screenHeight=document.body.clientHeight;}
return screenHeight;};self.hideURLBar=function(){var hideURLBar=function(){window.requestAnimationFrame(function(){window.scrollTo(0,1);});Bk.Event.removeListener(Bk.Event.BK_PAGE_LOADED,window,hideURLBar);};Bk.Event.addListener(Bk.Event.BK_PAGE_LOADED,window,hideURLBar);};self.getCookie=function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;};self.setCookie=function(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}else{var expires="";}
document.cookie=name+"="+value+expires+"; path=/";};self.eraseCookie=function(name){self.setCookie(name,"",-1);};self.scrollTo=function(eltId){var elt=document.getElementById(eltId);if(elt){window.scrollTo(0,Bk.offset(elt).top);}else{console.warn("We cannot scroll, element with id: "+eltId+" does not exist.");}};self.compareString=function(s1,s2){if(s1<s2){return-1;}
if(s1>s2){return 1;}
return 0;};self.isEmpty=function(chain){if(!chain){return true;}
return chain.replace(/^\s+|\s+$/,'').length==0;};self.createUUID=function(){var s=[];var hexDigits="0123456789ABCDEF";for(var i=0;i<32;i++){s[i]=hexDigits.substr(Math.floor(Math.random()*0x10),1);}
s[12]="4";s[16]=hexDigits.substr((s[16]&0x3)|0x8,1);return s.join("");};self.computeTopPosition=function(node){var height=0;if(window.getComputedStyle){height=parseInt(window.getComputedStyle(node,null).getPropertyValue("height"));}else if(node.currentStyle){height=(self.getClientHeight()*parseInt(node.clientHeight,10))/100;}
var topPos=((self.getClientHeight()-node.clientHeight)/2);return topPos+self.getScrollOffset();};self.computeLeftPosition=function(node){var result=(window.innerWidth-node.clientWidth)/2;return result;};self.getDocumentHeight=function(){return Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight));};self.getClientHeight=function(){var clientHeight=0;if(document.documentElement&&(document.documentElement.clientHeight)){clientHeight=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientHeight)){clientHeight=document.body.clientHeight;}
return clientHeight;};self.getScrollOffset=function(){var scrollOffset=0;if(document.documentElement&&(document.documentElement.scrollTop)){scrollOffset=document.documentElement.scrollTop;}else if(document.body&&(document.body.scrollTop)){scrollOffset=document.body.scrollTop;}else if(window.pageYOffset){scrollOffset=window.pageYOffset;}
return scrollOffset;};self.isAndroid=function(version){var versionMatch=/Android\s+([\d\.]+)/;var android=versionMatch.exec(navigator.userAgent);if(android&&android.length===2){var androidVersion=android[1];if(androidVersion.match(version)){return true;}}
return false;};self.isAndroidStock=function(){var nua=navigator.userAgent;var is_android=((nua.indexOf('Mozilla/5.0')>-1&&nua.indexOf('Android ')>-1&&nua.indexOf('AppleWebKit')>-1)&&!(nua.indexOf('Chrome')>-1));return is_android;};self.getOSInfo=function(){var info={"osName":'unknown',"osVersion":'unknown'};var ua=navigator.userAgent;var uaindex;if(ua.match(/iPad/i)||ua.match(/iPhone/i)){info.osName='iOS';uaindex=ua.indexOf('OS ');}else if(ua.match(/Android/i)){info.osName='Android';uaindex=ua.indexOf('Android ');}
if(info.osName==='iOS'&&uaindex>-1){info.osVersion=ua.substr(uaindex+3,3).replace('_','.');}else if(info.osName==='Android'&&uaindex>-1){info.osVersion=ua.substr(uaindex+8,3);}
return info;}
self.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n);};self.noop=function(){};self.forceRepaint=function(timeout){document.documentElement.style.paddingRight='1px';if(timeout){setTimeout(function(){document.documentElement.style.paddingRight='';},timeout);}else{document.documentElement.style.paddingRight='';}};return self;}());Bk.Dom=(function(){var self={};self.insertAfter=function(newElement,targetElement){var parent=targetElement.parentNode;if(parent.lastchild==targetElement){parent.appendChild(newElement);}else{parent.insertBefore(newElement,targetElement.nextSibling);}};self.importElement=function(container,id){var element=Bk.Dom.getElementById(id,container);if(element){element=Bk.Dom.importNode(element,true);}
return element;};self.findParentNode=function(parentName,node){var node=node.parentNode;while(node&&(node.nodeName.toLowerCase()!==parentName.toLowerCase())){node=node.parentNode;}
return node;};self.findParentNodeByAttr=function(key,value,node){var node=node.parentNode;while(node&&(value!==node.getAttribute(key))){node=node.parentNode;}
return node;};self.findParentNodeByAttr=function(attrName,attrValue,node){while(node){if(node.getAttribute&&(node.getAttribute(attrName)===attrValue)){return node;}
node=node.parentNode;}
return null;};self.importNode=function(node,deep){if(window.ActiveXObject){return document._importNode(node,deep);}else{return document.importNode(node,deep);}};self.getElementById=function(id,element){var currentEle;if(element==='undefined'||element==null){currentEle=window.document;}else{currentEle=element;}
if(typeof currentEle.getElementById!='function'){var elms=currentEle.getElementsByTagName('*');for(var i=0;i<elms.length;i++){if(elms[i].getAttribute('id')){if(elms[i].getAttribute('id')==id)
return elms[i];}else if(elms[i].id){if(elms[i].id==id){return elms[i];}}}
return null;}else{return currentEle.getElementById(id);}};self.getAllById=function(id,doc){doc=doc||document;if(doc.querySelectorAll){return doc.querySelectorAll("#"+id);}else{console.error("document.querySelectorAll not available. Polyfill needed.");return[Bk.Dom.getElementById(id,doc)];}};self.removeNode=function(node){if(node&&node.parentNode){node.parentNode.removeChild(node);}};self.getElementsByAttribute=function(rootElement,strTagName,strAttributeName,strAttributeValue){var arrElements=rootElement.getElementsByTagName(strTagName);var arrReturnElements=new Array();var oAttributeValue=(typeof strAttributeValue!="undefined")?new RegExp("(^|\\s)"+strAttributeValue
+"(\\s|$)","i"):null;var oCurrent;var oAttribute;for(var i=0;i<arrElements.length;i++){oCurrent=arrElements[i];oAttribute=oCurrent.getAttribute&&oCurrent.getAttribute(strAttributeName);if(typeof oAttribute=="string"&&oAttribute.length>0){if(typeof strAttributeValue=="undefined"||(oAttributeValue&&oAttributeValue.test(oAttribute))){arrReturnElements.push(oCurrent);}}}
return arrReturnElements;};self.getChildElementById=function(parent,id){var nodeIterator=document.createNodeIterator(parent,NodeFilter.SHOW_ELEMENT,function(node){if(node.getAttribute("id")===id){return NodeFilter.FILTER_ACCEPT;}
return NodeFilter.FILTER_SKIP;},false);return nodeIterator.nextNode();};self.getInnerText=function(el){var that=this;if(typeof el==='string'||typeof el==='undefined')return el;if(el.innerText)return el.innerText;var str='';var cs=el.childNodes;var l=cs.length;for(var i=0;i<l;i++){switch(cs[i].nodeType){case 1:str+=that.getInnerText(cs[i]);break;case 3:str+=cs[i].nodeValue;break;}}
return str;};self.rgClass=/[\n\t]/g;self.rgSpace=/\s+/;self.addClass=function(elt,clazz){var classNames=(clazz||"").split(self.rgSpace);if(!elt.className){elt.className=clazz;}else{var className=" "+elt.className+" ";for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){elt.className+=" "+classNames[c];}}}};self.hasClass=function(elt,clazz){var className=" "+clazz+" ";return(" "+elt.className+" ").replace(self.rgClass," ").indexOf(className)>-1;};self.isClassEmpty=function(elt){if(Bk.Util.isNull(elt)){return true;}
return""==elt.className.replace(" ","","gi");};self.dataFromClass=function(elt,prefix){var classNames=elt.className.split(self.rgSpace);var data;for(var c=0,cl=classNames.length;c<cl&&!data;c++){var idx=classNames[c].indexOf(prefix);if(-1<idx){data=classNames[c].substr(idx+prefix.length);}}
return data;};self.removeClass=function(elt,clazz){var classNames=(clazz||"").split(self.rgSpace);if(clazz){var className=(" "+elt.className+" ").replace(self.rgSpace," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
elt.className=className.substring(1,className.length-1);}else{elt.className="";}};self.toggleClass=function(elt,clazz){if(self.hasClass(elt,clazz)){self.removeClass(elt,clazz);}else{self.addClass(elt,clazz);}}
self.cleanClass=function(elt){if(self.isClassEmpty(elt)){elt.removeAttribute("class");}};self.isStyleEmpty=function(elt){if(Bk.Util.isNull(elt)){return true;}
return elt.style.length==0;};self.cleanStyle=function(elt){if(Bk.Dom.isStyleEmpty(elt)){elt.removeAttribute('style');}};self.getContent=function(node){return(node.text||node.textContent||node.innerHTML);};self.showInPage=function(box){box.style.display="block";};self.hideInPage=function(box){box.style.display="none";};self.setNewId=function(elt){var newId=Bk.Util.createUUID();elt.setAttribute("id",newId);return newId;};self.nodeName=function(elt,name){return elt.nodeName.toUpperCase()===name.toUpperCase();};self.removeChildrenFromNode=function(node){if(!node){return false;}
while(node.hasChildNodes()){node.removeChild(node.lastChild);}
return true;}
return self;})();Bk.swap=function(args){var transition=new Swap(args);transition.process();};Bk.toggle=function(args){var transition=new ToggleTransition(args);transition.process();};Bk.replace=function(args){Bk.replaceSection(args);};Bk.submit=function(args,submit){Bk.submitSection(args,submit);};Bk.replaceSection=function(args){var transition=new Replace(args);transition.process();};Bk.submitSection=function(args,submit){var transition=new SubmitSectionTransition(args,submit);transition.process();};Bk.replacePage=function(args){var transition=new Replace(args);transition.process();};Bk.submitPage=function(args){var transition=new SubmitPageTransition(args);transition.process();};Bk.Debug=(function(){"use strict";var self={};var debugMode=window.wopeSettings.DEBUG_MODE;self.displayAjaxFailureMessage=function(args){if(!Bk.Debug.isEnabled()){return;}
var header=Bk.Dom.getElementById("bk-header");var body=Bk.Dom.getElementById("bk-body");var parent=(header)?header:body;var id="bk-ajax-failure";var message=Bk.Dom.getElementById(id);if(message==null){message=document.createElement("div");message.id=id;}
message.innerHTML=args.message+" ";message.setAttribute("style","background-color:#b5c900;color:white;padding:2px;font-size:14px;");if(args.xhr&&args.xhr.status!=0){var link=document.createElement("a");link.innerHTML="<br/>See error details.";link.setAttribute("href","javascript:;");link.setAttribute("style","color:white;");message.appendChild(link);var openDeveloperErrorPage=function(){var w=window.open();w.document.write(args.xhr.responseText);w.focus();}
link.addEventListener("click",openDeveloperErrorPage,false);}
parent.insertBefore(message,parent.firstChild);Bk(document).one(Bk.Event.BK_PAGE_UNLOADED,function(){parent.removeChild(message);});};self.isEnabled=function(){return debugMode;};return self;}());Bk.Ajax=(function(){"use strict";var self={};self.POST="POST";self.GET="GET";var _timeout=window.wopeSettings.AJAX_TIMEOUT;var _create=function(){var xhr;try{xhr=new XMLHttpRequest();}catch(e){try{xhr=new ActiveXObject("Msxml2.XMLHTTP");}catch(e2){try{xhr=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}}
return xhr;};self.setTimeOut=function(timeout){_timeout=timeout;};self.getTimeOut=function(){return _timeout;};self.isSuccess=function(xhr){return 200===xhr.status||(window.cordova&&xhr.status===0);};self.isTimeout=function(xhr){return 0==xhr.status;};self.fetch=function(args){var timer,async=true,inTimeout=false,user=args.user||null,password=args.password||null,xhr=_create();if(_timeout>0){timer=setTimeout(function(){inTimeout=true;xhr.onreadystatechange=Bk.Util.noop();xhr.abort();if(args.onTimeout){args.onTimeout(xhr);}
Bk.Event.fireEvent(Bk.Event.BK_PAGE_LOAD_REQUEST_TIMEOUT,{"xhr":xhr});},_timeout);}
xhr.onreadystatechange=function(){if(xhr.readyState<4){return;}
if(xhr.readyState==4){xhr.onreadystatechange=Bk.Util.noop();if(timer){clearTimeout(timer);}
if(self.isSuccess(xhr)){if(args.onSuccess){args.onSuccess(xhr);}}else{if(!inTimeout){args.onError(xhr);}}}};var sessionidRegex=new RegExp(";jsessionid=\\w+[^\\?]+","i");var url=args.url.replace(sessionidRegex,"");var method=args.method;if(!method){method=self.GET;}
var data=args.data||null;if(data){if(method.toUpperCase()===self.GET){url+=(url.indexOf("?")>-1?"&":"?")+data;data=null;}}
xhr.open(method,url,async,user,password);if(args.data){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");}
if(args.beforeSend){args.beforeSend(xhr);}
xhr.send(data);};self.expectXML=function(xhr){if(xhr.overrideMimeType){xhr.overrideMimeType('application/xml');}
xhr.setRequestHeader("X-Bk-Ajax","application/xml");};self.getXMLResponse=function(xhr){if(!xhr)return null;var xml=null;if(xhr.responseXML!==null){if(typeof xhr.responseXML.getElementById==="undefined"){xml=new ActiveXObject('Microsoft.XMLDOM');xml.async=false;var origin=xhr.responseText;origin=origin.replace('<?xml version="1.0" encoding="UTF-8"?>','');origin=origin.replace('<!DOCTYPE html','');origin=origin.replace('SYSTEM "about:legacy-compat">','');xml.loadXML(origin);}else{xml=xhr.responseXML;}}else if(window.cordova){var parser=new DOMParser();xml=parser.parseFromString(xhr.responseText,"text/xml");}else{console.error("✘ Error while trying to retrieve XML document from response body: \n\n"+xhr.responseText);}
return xml;};return self;}());Bk.Geolocation=(function(){"use strict";var self={};self.init=function(){var precision=getGeolocPrecision();getLocation(precision,populateInputFieldsWithCurrentPosition,populateInputFieldsWithPositionError);};self.getCurrentPosition=function(precision,onLocationSuccess,onLocationFailure){getLocation(precision,onLocationSuccess,onLocationFailure);};var getLocation=function(precision,onLocationSuccess,onLocationFailure){if(window.navigator.geolocation){var geoloc=window.navigator.geolocation;if(precision!='undefined'&&precision=='accurate'){geoloc.getCurrentPosition(onLocationSuccess,onLocationFailure,{enableHighAccuracy:true});}else if(precision!='undefined'&&precision=='fast'){geoloc.getCurrentPosition(onLocationSuccess,onLocationFailure);}}else{console.warn("Geolocation not supported");}};var getGeolocPrecision=function(){var inputs=document.getElementsByTagName("input");var precision;for(var i=0;i<inputs.length;i++){if(inputs[i].getAttribute&&inputs[i].getAttribute("data-bk-geolocation")){precision=inputs[i].getAttribute("data-bk-geolocation");break;}}
return precision;};var setGeolocInputFieldValue=function(pos){if(getGeolocPrecision()!='undefined'){var inputs=document.getElementsByTagName("input");for(var i=0;i<inputs.length;i++){if(inputs[i].getAttribute&&inputs[i].getAttribute("data-bk-geolocation")){inputs[i].value=pos;}}}};var populateInputFieldsWithCurrentPosition=function(position){var pos=position.coords.latitude+",";pos+=position.coords.longitude;setGeolocInputFieldValue(pos);};var populateInputFieldsWithPositionError=function(error){switch(error.code){case error.TIMEOUT:setGeolocInputFieldValue('ERROR:TIMEOUT');break;case error.PERMISSION_DENIED:setGeolocInputFieldValue('ERROR:PERMISSION_DENIED');break;case error.POSITION_UNAVAILABLE:setGeolocInputFieldValue('ERROR:POSITION_UNAVAILABLE');break;case error.UNKNOWN_ERROR:setGeolocInputFieldValue('ERROR:UNKNOWN_ERROR');break;}};return self;}());Bk.animation={nodes:[],impl:function(animationName){var animationFn=null;if(animationName===Bk.CS.ANIMATION_NAME.SLIDE||animationName===Bk.CS.ANIMATION_NAME.SLIDE_BACKWARDS||animationName===Bk.CS.ANIMATION_NAME.PARALLAX||animationName===Bk.CS.ANIMATION_NAME.PARALLAX_BACKWARDS){animationFn=function(args){if(args){args.animationName=animationName;}
if(animationName.indexOf("slide")>=0){args.isBackwards=animationName!==Bk.CS.ANIMATION_NAME.SLIDE;}else if(animationName.indexOf("parallax")>=0){args.isBackwards=animationName!==Bk.CS.ANIMATION_NAME.PARALLAX;}
var slideAnimation=new Bk.SlideAnimation(args);slideAnimation.play();}}else if(animationName===Bk.CS.ANIMATION_NAME.FLIP||animationName==Bk.CS.ANIMATION_NAME.FLIP_BACKWARDS){animationFn=function(args){args.isBackwards=(animationName===Bk.CS.ANIMATION_NAME.FLIP?false:true);var flipAnimation=new Bk.FlipAnimation(args);flipAnimation.play();}}else if(animationName===Bk.CS.ANIMATION_NAME.FADE){animationFn=function(args){var fadeAnimation=new Bk.FadeAnimation(args);fadeAnimation.play();};}else{animationFn=function(args){var noneAnimation=new Bk.NoneAnimation(args);noneAnimation.play();};}
return animationFn;},reverse:function(name){var reverse="";if(name===Bk.CS.ANIMATION_NAME.SLIDE){reverse=Bk.CS.ANIMATION_NAME.SLIDE_BACKWARDS;}else if(name===Bk.CS.ANIMATION_NAME.PARALLAX){reverse=Bk.CS.ANIMATION_NAME.PARALLAX_BACKWARDS;}else if(name===Bk.CS.ANIMATION_NAME.SLIDE_BACKWARDS){reverse=Bk.CS.ANIMATION_NAME.SLIDE;}else if(name===Bk.CS.ANIMATION_NAME.PARALLAX_BACKWARDS){reverse=Bk.CS.ANIMATION_NAME.PARALLAX;}else if(name===Bk.CS.ANIMATION_NAME.FLIP){reverse=Bk.CS.ANIMATION_NAME.FLIP_BACKWARDS;}else if(name===Bk.CS.ANIMATION_NAME.FLIP_BACKWARDS){reverse=Bk.CS.ANIMATION_NAME.FLIP;}else if(name===Bk.CS.ANIMATION_NAME.FADE){reverse=Bk.CS.ANIMATION_NAME.FADE;}else if(name===Bk.CS.ANIMATION_NAME.UNFOLD){reverse=Bk.CS.ANIMATION_NAME.UNFOLD;}
return reverse;},removeBoxCallback:function(evt){var box=evt.target;if(box.parentNode){box.parentNode.removeChild(box);}},hideBoxCallback:function(evt){Bk.Dom.hideInPage(evt.target);},makeBoxAbsolute:function(box1,box2,eventName){var boxesParentBox=Bk((box1||box2).parentNode);boxesParentBox.addClass("bk-anim-boxes-container");var box1ComputedStyle=getComputedStyle(box1,null);var offset1=Bk.animation.offset(box1);var box2ComputedStyle=getComputedStyle(box2,null);var offset2=Bk.animation.offset(box2);box2.style.left=offset1.left+"px";var height1=parseInt(box1ComputedStyle.height,10);var height2=parseInt(box2ComputedStyle.height,10);var boxWithSmallerHeight=(height1<height2)?box1:box2;var boxWithGreaterHeight=(height1<height2)?box2:box1;console.debug("boxWithSmallerHeight.id: "+boxWithSmallerHeight.id);console.debug("boxWithGreaterHeight.id: "+boxWithGreaterHeight.id);var top=(offset1.top<offset2.top)?offset1.top-Bk.animation.computeHeightOfTopAttributes(box1ComputedStyle):offset2.top-Bk.animation.computeHeightOfTopAttributes(box2ComputedStyle);boxWithSmallerHeight.style.position="absolute";boxWithSmallerHeight.style.top=top+"px";boxWithSmallerHeight.style.width=boxWithGreaterHeight.offsetWidth+"px";boxWithSmallerHeight.addEventListener(eventName,function(evt){var box=evt.target;box.removeEventListener(evt.type,arguments.callee,false);box.style.position="";box.style.top="";box.style.width="";boxesParentBox.removeClass("bk-anim-boxes-container");},false);},computeHeightOfTopAttributes:function(computedStyle){return parseInt(computedStyle.paddingTop,10)
+parseInt(computedStyle.borderTopWidth,10)
+parseInt(computedStyle.marginTop,10);},computeFullHeight:function(computedStyle){return parseInt(computedStyle.height,10)
+parseInt(computedStyle.paddingTop,10)
+parseInt(computedStyle.paddingBottom,10)
+parseInt(computedStyle.borderTopWidth,10)
+parseInt(computedStyle.borderBottomWidth,10)
+parseInt(computedStyle.marginTop,10)
+parseInt(computedStyle.marginBottom,10);},offset:function(elt){if(!elt){return{top:0,left:0};}
if(elt===elt.ownerDocument.body){console.warn("We do not handle offset.bodyOffset");return{top:0,left:0};}
Bk.animation._offsetInitialized||Bk.animation._initializeOffset();var elem=elt,offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,computedStyle,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView.getComputedStyle(elem,null),top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){computedStyle=defaultView.getComputedStyle(elem,null);top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){if(computedStyle.position!=="relative"){top+=elem.offsetTop;left+=elem.offsetLeft;}
if(Bk.animation._offset.doesNotAddBorder&&!(Bk.animation._offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(elem.tagName))){top+=parseInt(computedStyle.borderTopWidth,10)||0;left+=parseInt(computedStyle.borderLeftWidth,10)||0;}
prevOffsetParent=offsetParent;offsetParent=elem.offsetParent;}
if(Bk.animation._offset.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseInt(computedStyle.borderTopWidth,10)||0;left+=parseInt(computedStyle.borderLeftWidth,10)||0;}
prevComputedStyle=computedStyle;}
if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft;}
if(prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);}
return{top:top,left:left};},registerNodeInTransition:function(eventType,nodeA,nodeB){var indexA=Bk.animation.inTransition(nodeA);var indexB=nodeB?Bk.animation.inTransition(nodeB):-1;var dataA,dataB;if(indexA!==-1){dataA=Bk.animation.nodes[indexA];Bk.animation.nodes.splice(indexA,1);}
if(indexB!==-1){dataB=Bk.animation.nodes[indexB];Bk.animation.nodes.splice(indexB,1);}
if(dataA){Bk.animation.sendTransitionEndEvent(dataA.eventType,dataA.node);Bk.animation.sendTransitionEndEvent(dataA.eventType,dataA.otherNode);}
if(dataB){Bk.animation.sendTransitionEndEvent(dataB.eventType,dataB.node);Bk.animation.sendTransitionEndEvent(dataB.eventType,dataB.otherNode);}
var a={node:nodeA,eventType:eventType,otherNode:nodeB};Bk.animation.listenToUnregisterNodeInTransition(eventType,nodeA);Bk.animation.nodes.push(a);if(nodeB){var b={node:nodeB,eventType:eventType,otherNode:nodeA};Bk.animation.listenToUnregisterNodeInTransition(eventType,nodeB);Bk.animation.nodes.push(b);}},sendTransitionEndEvent:function(eventType,node){if(!window.WebKitAnimationEvent){Bk.Event.addListener("transitionEndListenerReady",window,function(){Bk.Event.createAndDispatchEvent("webkitTransitionEnd",node);});return;}
var event;if(node){var computedStyle=getComputedStyle(node,null);if(eventType==="webkitAnimationEnd"){var animationName=computedStyle.webkitAnimationName;if(animationName&&animationName!=="none"){event=document.createEvent("WebKitAnimationEvent");event.initWebKitAnimationEvent("webkitAnimationEnd",true,true,animationName,0.0);node.dispatchEvent(event);}}else if(eventType==="webkitTransitionEnd"){try{event=new WebKitTransitionEvent("webkitTransitionEnd",true,true,computedStyle.webkitTransitionProperty,0.0);}catch(ignore){event=document.createEvent("WebKitTransitionEvent");event.initWebKitTransitionEvent("webkitTransitionEnd",true,true,computedStyle.webkitTransitionProperty,0.0);}
node.dispatchEvent(event);}}},inTransition:function(elem){var indexOf=-1;for(var i=0,length=Bk.animation.nodes.length;i<length&&indexOf===-1;i++){if(Bk.animation.nodes[i].node===elem){indexOf=i;}}
return indexOf;},listenToUnregisterNodeInTransition:function(eventType,node){var unregisterNode=function(evt){setTimeout(function(){var node=evt.target;if(!node){return;}
node.removeEventListener(evt.type,arguments.callee,false);var index=Bk.animation.inTransition(node);if(index!==-1){Bk.animation.nodes.splice(index,1);}},200);};node.addEventListener(eventType,unregisterNode,false);},listenToCreateLocationTimer:function(eventType,node){if(node){var createTimer=function(evt){evt.target.removeEventListener(evt.type,arguments.callee,false);};node.addEventListener(eventType,createTimer,false);}},_initializeOffset:function(){if(Bk.animation._offsetInitialized){return;}
var body=document.body,container=document.createElement('div'),innerDiv,checkDiv,table,td,rules,prop,bodyMarginTop=body.style.marginTop,html='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;">'+'<div></div>'+'</div>'+'<table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0">'+'<tr>'+'<td></td>'+'</tr>'+'</table>';rules={position:'absolute',top:0,left:0,margin:0,border:0,width:'1px',height:'1px',visibility:'hidden'};for(prop in rules){container.style[prop]=rules[prop];}
container.innerHTML=html;if(container.innerHTML===''){var _injectElements=function(container){var node=document.createElement('div');node.setAttribute("style",'position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;');container.appendChild(node);};_injectElements(container);}
if(container.innerHTML===''){console.error("container.innerHTML is still empty, aborting!");return;}
body.insertBefore(container,body.firstChild);innerDiv=container.firstChild;checkDiv=innerDiv.firstChild;td=innerDiv.nextSibling.firstChild.firstChild;Bk.animation._offset={};Bk.animation._offset.doesNotAddBorder=(checkDiv.offsetTop!==5);Bk.animation._offset.doesAddBorderForTableAndCells=(td.offsetTop===5);innerDiv.style.overflow='hidden';innerDiv.style.position='relative';Bk.animation._offset.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);body.style.marginTop='1px';Bk.animation._offset.doesNotIncludeMarginInBodyOffset=(body.offsetTop===0);body.style.marginTop=bodyMarginTop;body.removeChild(container);Bk.animation._offsetInitialized=true;},_initializeSupport:function(){if(Bk.animation._supportInitialized){return;}
var div=document.createElement("div");div.style.width=div.style.paddingLeft="1px";document.body.appendChild(div);Bk.boxModel=div.offsetWidth===2;document.body.removeChild(div).style.display='none';},fireBkNodeLoaded:function(node){if(node.id=="bk-body"){Bk.Event.fireEvent(Bk.Event.BK_BODY_LOADED,{body:node});}
Bk.Event.fireEvent(Bk.Event.BK_NODE_LOADED,{"node":node});}};Bk.Head=(function(){"use strict";var self={};var SKIP_FLAG='bk-skip';var REMOVE_FLAG='bk-remove';var nbOfRemainingHeadChildsToLoad=0;var headChildsToLoad=[];Bk.onPageUnloaded(function(){nbOfRemainingHeadChildsToLoad=0;headChildsToLoad=[];});self.updateAndNotify=function(newDocument){if(newDocument){handleTitle(newDocument);handleMetas(newDocument);handleResources(newDocument);}else{Bk.Event.fireEvent(Bk.Event.BK_SCRIPTS_LOADED);}};var handleTitle=function(newDocument){var newTitle=newDocument.getElementsByTagName("title")[0];if(newTitle){newTitle=Bk.Dom.importNode(newTitle,true);var title=document.getElementsByTagName("title")[0];if(title){title.parentNode.replaceChild(newTitle,title);}else{document.getElementsByTagName("head")[0].appendChild(newTitle);}}};var handleMetas=function(newDocument){var head=document.getElementsByTagName("head")[0];var old_metas=document.getElementsByTagName("meta");while(old_metas.length!=0){head.removeChild(old_metas[0]);}
var new_metas=newDocument.getElementsByTagName("meta");for(var i=0;i<new_metas.length;i++){insertChild(head,new_metas[i]);}};var handleResources=function(newDocument){var head=document.getElementsByTagName("head")[0];var newHead=newDocument.getElementsByTagName("head")[0];handleOneKindOfResource(newHead,"link");handleOneKindOfResource(newHead,"style");handleOneKindOfResource(newHead,"script");if(!Bk.Dom.getElementById("bk-overlay",document)){var overlay=Bk.Dom.getElementById("bk-overlay",newDocument);if(overlay){document.body.appendChild(Bk.Dom.importNode(overlay,true));}}
nbOfRemainingHeadChildsToLoad=headChildsToLoad.length;if(nbOfRemainingHeadChildsToLoad==0){Bk.Event.fireEvent(Bk.Event.BK_SCRIPTS_LOADED);}else{for(var i=0;i<headChildsToLoad.length;i++){insertChild(head,headChildsToLoad[i]);}}};var handleOneKindOfResource=function(newHead,tagName){var head=document.getElementsByTagName("head")[0];var curTags=document.getElementsByTagName(tagName);var newTags=newHead.getElementsByTagName(tagName);var found;for(var i=0;i<curTags.length;i++){found=false;for(var j=0;j<newTags.length;j++){var comp=compareChildren(curTags[i],newTags[j]);if(comp==0){newTags[j].setAttribute(SKIP_FLAG,"true");found=true;break;}}
if(!found&&((tagName==="script"&&curTags[i].id=="bk-google-analytics")||(tagName==="script"&&!curTags[i].getAttribute("src"))||(tagName==="style"||tagName==="link")))
{curTags[i].setAttribute(REMOVE_FLAG,"true");}}
for(var i=0;i<curTags.length;i++){if(curTags[i].getAttribute(REMOVE_FLAG)=="true"){try{curTags[i].removeAttribute(REMOVE_FLAG);head.removeChild(curTags[i]);}catch(err){}
i--;}}
for(var j=0;j<newTags.length;j++){if(newTags[j].getAttribute(SKIP_FLAG)!="true"){newTags[j].removeAttribute(SKIP_FLAG);headChildsToLoad.push(newTags[j]);}}};var insertChild=function(head,node){if(isExternalStyleSheet(node)){handleExternalStyleSheet(head,node);}else if(isInlineStyleSheet(node)){handleInlineStyleSheet(head,node);}else if(isScript(node)){handleScript(head,node);}else{node=Bk.Dom.importNode(node,true);head.appendChild(node);decrementNbOfRemainingHeadChildsToLoad();}};var isInlineStyleSheet=function(node){var isStyleSheet=node.getAttribute("type")==="text/css";return Bk.Dom.nodeName(node,"style");};var isExternalStyleSheet=function(node){var hasHref=node.getAttribute("href")!==null;var isStyleSheet=node.getAttribute("rel")==="stylesheet";return Bk.Dom.nodeName(node,"link")&&isStyleSheet&&hasHref;};var isScript=function(node){return Bk.Dom.nodeName(node,"script");};var isExternalJavaScript=function(node){return node.getAttribute("src")&&(node.getAttribute("src").indexOf("bk.js")==-1);};var handleInlineStyleSheet=function(head,node){node=Bk.Dom.importNode(node,true);head.appendChild(node);decrementNbOfRemainingHeadChildsToLoad();};var handleScript=function(head,node){var newNode=document.createElement("script");if(node.getAttribute("id")){newNode.setAttribute("id",node.getAttribute("id"));}
if(node.getAttribute("type")){newNode.setAttribute("type",node.getAttribute("type"));}
if(node.innerHTML){newNode.innerHTML=node.innerHTML;}else if(node.childNodes[0]!=null){newNode.innerHTML=node.childNodes[0].nodeValue;}
if(isExternalJavaScript(node)){newNode.onload=newNode.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){decrementNbOfRemainingHeadChildsToLoad();newNode.onload=newNode.onreadystatechange=null;}};newNode.onerror=function(){decrementNbOfRemainingHeadChildsToLoad();newNode.onerror=null;};newNode.setAttribute("src",node.getAttribute("src"));}else{decrementNbOfRemainingHeadChildsToLoad();}
head.appendChild(newNode);};var handleExternalStyleSheet=function(head,node){var nbOfLinks=document.styleSheets.length;var newNode=document.createElement('link');newNode.rel='stylesheet';newNode.href=node.getAttribute('href');newNode.type="text/css";waitStylesheetToBeCompletlyLoaded(nbOfLinks);head.appendChild(newNode);};var waitStylesheetToBeCompletlyLoaded=function(index){try{if(document.styleSheets[index].cssRules){decrementNbOfRemainingHeadChildsToLoad();}else{if(document.styleSheets[index].rules&&document.styleSheets[index].rules.length){decrementNbOfRemainingHeadChildsToLoad();}else{setTimeout(function(){waitStylesheetToBeCompletlyLoaded(index);},250);}}}
catch(e){console.error("An error occured while retrieving stylesheet. e: "+e);setTimeout(function(){waitStylesheetToBeCompletlyLoaded(index);},250);}};var decrementNbOfRemainingHeadChildsToLoad=function(){nbOfRemainingHeadChildsToLoad--;if(nbOfRemainingHeadChildsToLoad===0){Bk.Event.fireEvent(Bk.Event.BK_SCRIPTS_LOADED);}};var compareChildren=function(a,b){var comp=compareLocations(a.getAttribute("src"),b.getAttribute("src"));if(!comp){comp=compareLocations(a.getAttribute("href"),b.getAttribute("href"));}
if(!comp){comp=Bk.Util.compareString(Bk.Dom.getContent(a),Bk.Dom.getContent(b));}
return comp;};var compareLocations=function(a,b){var _a=canonicalize(a);var _b=canonicalize(b);return Bk.Util.compareString(_a,_b);};var canonicalize=function(url){var div=document.createElement("div");div.innerHTML="<a></a>";div.firstChild.href=url;div.innerHTML=div.innerHTML;return div.firstChild.href.split(";")[0];};return self;}());Bk.Form=(function(){"use strict";var self={};var _isiOS6=function(){return navigator.userAgent.match(/OS 6(_\d)+ like Mac OS X/i);}
Bk(document).on('keyup',function(e){var parent=e.target.parentNode;var targetElt=e.target;if(_isiOS6()){var elt=Bk(targetElt);var oldPH=elt.attr("data-shadowplaceholder")?elt.attr("data-shadowplaceholder"):elt.attr("placeholder");if(!elt.attr("data-shadowplaceholder")){elt.attr("data-shadowplaceholder",oldPH);}
if(oldPH){setTimeout(function(){elt.attr("placeholder","");if(!targetElt.value||targetElt.value.length===0){elt.attr("placeholder",elt.attr("data-shadowplaceholder"));}},10);}}
if(parent&&Bk(parent).hasClass("bk-input-wrapper")){Bk.Form.displayInputClearButton(targetElt);}
return true;});self.buildXHRData=function(form,submit){var elts=[];for(var i=0;i<form.elements.length;i++){elts.push(form.elements[i]);}
var inputImages=Bk.Dom.getElementsByAttribute(form,"input","type","image");for(var i=0;i<inputImages.length;i++){elts.push(inputImages[i]);}
var length=elts.length;var parameters=[];if(submit){var typeOfSubmittedElement=submit.getAttribute("type");}
for(var i=0;i<length;i++){var elt=elts[i];if(elt.name===""){continue;}
if(submit){var typeOfCurrentElement=elt.getAttribute("type");if(typeOfCurrentElement==="submit"||typeOfCurrentElement=="image"){if((typeOfCurrentElement!==typeOfSubmittedElement)||(elt.name!==submit.name)||(elt.value!==submit.value)){continue;}}}
if(!elt.disabled){var value=getFieldValue(elt);if(value!==undefined){var name=encodeURIComponent(elt.name);if(Bk.Util.isArray(value)){var vl=value.length;for(var v=0;v<vl;v++){parameters.push(name+"="+encodeURIComponent(value[v]));}}else{parameters.push(name+"="+encodeURIComponent(value));}}}}
return parameters;};self.doSubmitOnBack=function(submit){var submitOnBack=true;var flag=submit.getAttribute("data-bk-submit-on-back");if(flag&&flag==="false"){submitOnBack=false;}
return submitOnBack;};self.doPreserveMethodOnBack=function(elt){var preserveMethod=false;var flag=elt.getAttribute("data-bk-preserve-method-on-back");if(flag&&flag==="true"){preserveMethod=true;}
return preserveMethod;};self.displayInputClearButton=function(input){var parent=input.parentNode;if(Bk.Dom.hasClass(parent,'bk-input-wrapper')){if(input.value.length===0){Bk.Dom.removeClass(parent,'bk-deleteicon-on');}
else if(!Bk.Dom.hasClass(parent,'bk-deleteicon-on')){Bk.Dom.addClass(parent,'bk-deleteicon-on');}}};self.clearInputAndRemoveClearButton=function(elt){if(elt){var parent=elt.parentNode;var kids=parent.childNodes;for(var i=0;i<kids.length;i++){if(kids[i].tagName.toLowerCase()=='input'){var input=kids[i];if(Bk.Dom.hasClass(parent,'bk-deleteicon-on')){input.value="";Bk.Dom.removeClass(parent,'bk-deleteicon-on');if(_isiOS6()){var bkinput=Bk(input);var oldPH=bkinput.attr("data-shadowplaceholder")||bkinput.attr("placeholder");if(oldPH){bkinput.attr("placeholder",oldPH);}}}}}}};var getFieldValue=function(elt){var value;if(Bk.Dom.nodeName(elt,"select")){var index=elt.selectedIndex;if(index<0){value=null;}else if(elt.type==="select-one"){value=selectOptionValue(elt.options[index]);}else{value=[];var options=elt.options;var length=options.length;for(var i=0;i<length;i++){var option=options[i];if(option.selected){value.push(selectOptionValue(option));}}}}else if(elt.type==="checkbox"||elt.type==="radio"){if(elt.checked){value=elt.value;}}else{value=elt.value||"";}
return value;};var selectOptionValue=function(elt){return(elt.attributes.value||{}).specified?elt.value:elt.text;};return self;}());Bk.Url=(function(){"use strict";var self={};var regExp=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/;var parse=function(url){var matches=regExp.exec(url||"")||[];return{href:matches[0]||"",hrefNoHash:matches[1]||"",hrefNoSearch:matches[2]||"",domain:matches[3]||"",protocol:matches[4]||"",doubleSlash:matches[5]||"",authority:matches[6]||"",username:matches[8]||"",password:matches[9]||"",host:matches[10]||"",hostname:matches[11]||"",port:matches[12]||"",pathname:matches[13]||"",directory:matches[14]||"",filename:matches[15]||"",search:matches[16]||"",hash:matches[17]||""};};self.isSameDomain=function(url1,url2){var domain1=parse(url1).domain;var domain2=parse(url2).domain;if(domain1===''){return true;}
return domain1===domain2;};self.getLocation=function(){var location="";location+=window.location.protocol;location+="//";location+=window.location.host;location+=window.location.pathname;return location;};self.extractFragment=function(url){var idx=url.indexOf("#");var fragment=idx!=-1?url.substring(idx+1):"";return fragment;};self.dropFragment=function(url){var idx=url.indexOf("#");var fragmentFreeUrl=idx!=-1?url.substring(0,idx):url;return fragmentFreeUrl;};return self;}());Bk.Hash=(function(){"use strict";var self={};var PREFIX="_bk_";var SEP="#";self.get=function(){if(location.hash===""){return"";}
var hash=location.hash.substr(PREFIX.length+1);hash=hash.replace(/%23/g,"#");return hash;};self.getLocation=function(){var hash=self.get();if(hash){return self.unserialize(hash).url;}
return Bk.Url.getLocation();};self.getIndex=function(){var hash=self.get();if(hash){return self.unserialize(hash).index;}
return null;};self.getAnchor=function(){var hash=self.get();if(hash){return self.unserialize(hash).anchor;}
return null;};self.isPresent=function(){return window.location.hash.indexOf(PREFIX)>-1;};self.serialize=function(item){var hash="";hash+="x="+item.getIndex();hash+=SEP;var remote=item.getRemoteTransition();if(remote){hash+="u="+encodeURI(remote.getLocation());hash+=SEP;var anchorId=remote.getAnchorId();if(anchorId){hash+="a="+anchorId;hash+=SEP;}}else{var url=Bk.Hash.getLocation();hash+="u="+encodeURI(url);hash+=SEP;}
location.hash=PREFIX+hash;return hash;};self.unserialize=function(hash){var chunks=hash.split(SEP);var cl=chunks.length;var history={index:-1};var chunk,c;for(c=0;c<cl;c++){chunk=chunks[c];if(chunk.indexOf("x=")===0){history.index=parseInt(chunk.substr(2),10);}else if(chunk.indexOf("u=")===0){history.url=decodeURI(chunk.substr(2));}else if(chunk.indexOf("a=")===0){history.anchor=chunk.substr(2);}else if(chunk.indexOf("d=")===0){history.data=chunk.substr(2);if(history.data&&0<history.data.length){history.data=decodeURI(history.data).split("&");}}}
return history;};return self;}());Bk.History=(function(){"use strict";var self={};var _PREFIX="_bk_";var _SEP="#";var _local=[];var _remote=[];var _index=-1;var _delta=0;(function(){Bk(document).on(Bk.Event.BK_LOCATION_CHANGED,function(evt){_handleLocationChange(evt);});Bk(document).on(Bk.Event.BK_TRANSITIONS_COMPLETED,function(evt){var data=evt.data;var remote=data.url?true:false;if(data.historize==='false'){return;}
if(data.back===false){if(remote){_delta+=_local.length;_local=[];_remote.push({forward:data.items});}else{_local.push({forward:data.items});}
_initializeBack(remote);_serialize(data.url,data.anchor);}});}());var _initializeBack=function(remote){var _stack=(remote===true)?_remote:_local;var previous=_stack[_stack.length-2];var current=_stack[_stack.length-1]
var back=[];var config={};if(previous){for(var i=0;i<previous.forward.length;i++){var item=previous.forward[i];if(item.url){config.url=item.url;}
if(item.data){if(item.submitOnBack===false){config.data=null;}else{config.data=item.data;}
if(item.preserveMethodOnBack===true){config.method=item.method;}else{config.method=Bk.Ajax.GET;}}
if(item.anchor){config.anchor=item.anchor;}}}else{config.url=Bk.Hash.getLocation();}
for(var i=0;i<current.forward.length;i++){var _item=current.forward[i];var item={};item.type=_item.type;item.from=_item.to;item.to=_item.from;if(config.anchor){item.anchor=config.anchor;}
if(_item.loader){item.loader=_item.loader;}
if(_item.animation){item.animation=Bk.animation.reverse(_item.animation);}
if(_item.url){item.url=config.url;item.method=config.method;item.data=config.data;}
item.isBack=true;item.oldTranslate=_item.oldTranslate;back.push(item);}
current.back=back;}
var _handleLocationChange=function(){var hash=_unserialize();if(1<Math.abs(_index<_index)||(_remote.length===0&&_local.length===0&&_delta===0)){if(typeof hash.url==="undefined"){return;}
if(!Bk.Url.isSameDomain(hash.url,window.location)){return;}
window.location=hash.url;return;}
if(hash.index<_index){if(_remote.length===0&&_local.length===0){var delta=0-_delta;window.history.go(delta);return;}
if(_local.length!==0){Bk.transition(_local.pop().back,true);}else{Bk.transition(_remote.pop().back,true);}}
console.debug("★ local replace");Bk.LocationChangeListener.stop();Bk.LocationChangeListener.start();};var _serialize=function(url,anchor){var hash="";_index++;hash+="x="+_index;hash+=_SEP;if(url){hash+="u="+url;hash+=_SEP;}
if(anchor){hash+="a="+anchor;hash+=_SEP;}
window.location.hash=_PREFIX+hash;};var _unserialize=function(){var data={index:-1};var hash=location.hash.substr(_PREFIX.length+1);var chunks=hash.split(_SEP);var cl=chunks.length,chunk,c;for(c=0;c<cl;c++){chunk=chunks[c];if(chunk.indexOf("x=")===0){data.index=parseInt(chunk.substr(2),10);}else if(chunk.indexOf("u=")===0){data.url=decodeURI(chunk.substr(2));}}
return data;};return self;}());Bk.LocationChangeListener=(function(){"use strict";var self={};var TIMER_DELAY=100;var timer=null;var lastHash="";(function(){Bk(document).on(Bk.Event.BK_PAGE_LOADED,function(){self.start();});}());var checkLocation=function(){if(isLocationChanged()){self.stop();Bk.Event.fireEvent(Bk.Event.BK_LOCATION_CHANGED,{hash:lastHash});}};var isLocationChanged=function(){var changed=false;var currentHash=Bk.Hash.get();changed=currentHash!==lastHash;if(changed){lastHash=currentHash;}
return changed;};self.start=function(){timer=setInterval(checkLocation,TIMER_DELAY);};self.stop=function(){if(timer){clearInterval(timer);}};return self;}());Bk.webAnalytics={};Bk.Chart=Bk.Chart||{};Bk.Chart.Line=function(){var self={};var CS={X_AXIS_LABEL_HEIGHT:20,Y_AXIS_LABEL_LENGTH_FROM_Y_AXIS:10,MARGIN:20,TICK_LENGTH:4,LEGEND_PADDING_TOP:20,LENGTH_BETWEEN_EACH_TICKS:80};var _vis=null;var _group=null;var _xData=null;var _yDataArr=null;var _settings=null;var _jsonlines=null;var _onOrientationChangeEventName="";var _container=null;var _buildTriggerEvent=null;function _init(xData,yDataArr,settings,jsonlines,event){_container=document.getElementById(settings.containerId);if(!_container){console.warn("Unable to find the line chart container with id: ["+args.id+"]. Aborting!");return;}
var parentNode=_container.parentNode;if(Bk.Dom.hasClass(parentNode,'bk-popup')){parentNode.style.display="block";}
CS.SVG_WIDTH=window.getComputedStyle(parentNode).getPropertyValue('width').replace("px","")||document.body.clientWidth;CS.SVG_HEIGHT=(CS.SVG_WIDTH*0.75);CS.NB_OF_X_TICKS=Math.round(CS.SVG_WIDTH/CS.LENGTH_BETWEEN_EACH_TICKS);CS.NB_OF_Y_TICKS=Math.round(CS.SVG_HEIGHT/CS.LENGTH_BETWEEN_EACH_TICKS);_xData=xData;_yDataArr=yDataArr;_settings=settings;_jsonlines=jsonlines;_buildTriggerEvent=event||_buildTriggerEvent;};function _build(xData,yDataArr,settings,jsonlines){var yMin=d3.min(yDataArr,function(d){return d3.min(d.values)});var yMax=d3.max(yDataArr,function(d){return d3.max(d.values)});var xMin=d3.min(xData.values);var xMax=d3.max(xData.values);var y=d3.scale.linear().domain([yMin,yMax]).range([0+CS.MARGIN,CS.SVG_HEIGHT-CS.MARGIN]);var x=d3.scale.linear().domain([xMin,xMax]).range([0+CS.MARGIN+CS.Y_AXIS_LABEL_LENGTH_FROM_Y_AXIS+CS.MARGIN,CS.SVG_WIDTH-CS.MARGIN]);_vis=d3.select(_container).append("svg:svg").attr("width",CS.SVG_WIDTH).attr("height",CS.SVG_HEIGHT+CS.X_AXIS_LABEL_HEIGHT);_group=_vis.append("svg:g").attr("transform","translate(0, "+CS.SVG_HEIGHT+")");_group.append("svg:rect").attr("x",x(xMin)).attr("y",-1*y(yMax)).attr("width",x(xMax)-x(xMin)).attr("height",y(yMax)-CS.MARGIN).attr("style","fill:"+settings.chartbgcolor+";stroke:"+settings.chartbgcolor+";stroke-width:1.5px");_group.selectAll(".xGrid").data(x.ticks(CS.NB_OF_X_TICKS*2)).enter().append("svg:line").attr("x1",function(d){return x(d);}).attr("x2",function(d){return x(d);}).attr("y1",-1*y(yMin)).attr("y2",-1*y(yMax)).attr("class","bk-chart-grid-line");_group.selectAll(".yGrid").data(y.ticks(CS.NB_OF_Y_TICKS*2)).enter().append("svg:line").attr("class","bk-chart-grid-line").attr("y1",function(d){return-1*y(d);}).attr("y2",function(d){return-1*y(d);}).attr("x1",x(xMin)).attr("x2",x(xMax));_group.append("svg:line").attr("x1",x(xMin)).attr("x2",x(xMax)).attr("y1",-1*y(yMin)).attr("y2",-1*y(yMin)).attr("class","bk-x-axis");_group.append("svg:line").attr("x1",x(xMin)).attr("x2",x(xMin)).attr("y1",-1*y(yMin)).attr("y2",-1*y(yMax)).attr("class","bk-y-axis");_group.append("svg:text").attr("text-anchor","middle").attr("x",(x.range()[1]/2)+CS.MARGIN).attr("y",CS.X_AXIS_LABEL_HEIGHT).append("svg:tspan").text(settings.xAxisLabel);_group.append("svg:text").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("x",(y.range()[1]/2)).attr("y",y(yMin)-CS.Y_AXIS_LABEL_LENGTH_FROM_Y_AXIS).text(settings.yAxisLabel);_group.selectAll(".xTicks").data(x.ticks(CS.NB_OF_X_TICKS)).enter().append("svg:line").attr("class","bk-x-ticks").attr("x1",function(d){return x(d);}).attr("x2",function(d){return x(d);}).attr("y1",-1*y(yMin)-2).attr("y2",-1*y(yMin)+2);_group.selectAll(".yTicks").data(y.ticks(CS.NB_OF_Y_TICKS)).enter().append("svg:line").attr("class","bk-y-ticks").attr("y1",function(d){return-1*y(d);}).attr("y2",function(d){return-1*y(d);}).attr("x1",x(xMin)-CS.TICK_LENGTH/2).attr("x2",x(xMin)+CS.TICK_LENGTH/2);_group.selectAll(".xLabel").data(x.ticks(CS.NB_OF_X_TICKS)).enter().append("svg:text").attr("class","xLabel").text(String).attr("x",function(d){return x(d);}).attr("y",-1*y(yMin)+CS.MARGIN).attr("text-anchor","middle");_group.selectAll(".yLabel").data(y.ticks(CS.NB_OF_Y_TICKS)).enter().append("svg:text").attr("class","yLabel").text(String).attr("x",(y(yMin))).attr("y",function(d){return-1*y(d);}).attr("text-anchor","right").attr("dy",4);for(var i=0;i<yDataArr.length;i++){self.lines[i]=d3.svg.line().x(function(d,i){var xTmp=x(xData.values[i]);return xTmp;}).y(function(d){var yTmp=-1*y(d);return yTmp;});var zeroArr=[];for(var j=0;j<yDataArr[i].values.length;j++){zeroArr[j]=yMin;}}
self.drawLegend(x);for(var i=0;i<self.lines.length;i++){_group.append("svg:path").attr("d",self.lines[i](zeroArr)).attr("style","stroke:"+jsonlines[i].color).transition().duration(1000).attr("d",self.lines[i](yDataArr[i].values));}
if(_buildTriggerEvent&&_buildTriggerEvent.data.callback){_buildTriggerEvent.data.callback();}
Bk.Event.fireEvent(Bk.Event.BK_CHART_BUILT);};function _react(){_onOrientationChangeEventName=Bk.Event.onOrientationChange(_onOrientationChangeHandler);Bk(document).one(Bk.Event.BK_PAGE_UNLOADED,function(){Bk.Event.removeListener(_onOrientationChangeEventName,window,_onOrientationChangeHandler);});};function _onOrientationChangeHandler(){self.destroy();self.build(_xData,_yDataArr,_settings,_jsonlines);};self.lines=[];self.build=function(xData,yDataArr,settings,jsonlines,e){setTimeout(function(){_init(xData,yDataArr,settings,jsonlines,e);_build(xData,yDataArr,settings,jsonlines);_react();},500);};self.destroy=function(){Bk.Event.removeListener(_onOrientationChangeEventName,window,_onOrientationChangeHandler);if(_vis){_vis[0][0].parentNode.removeChild(_vis[0][0]);}};self.drawLegend=function(x){var yTranslate=CS.SVG_HEIGHT+CS.LEGEND_PADDING_TOP+CS.X_AXIS_LABEL_HEIGHT;var svgElement=d3.select(_container).select('svg');var wrap=svgElement.append("svg:g").attr("text-anchor","middle").attr("transform","translate(0, "+(yTranslate)+")").data([_jsonlines]);var legend=d3Legend();legend.color(_settings.color);legend.width(CS.SVG_WIDTH);wrap.datum(_jsonlines).call(legend);var newHeight=CS.SVG_HEIGHT+CS.X_AXIS_LABEL_HEIGHT+CS.LEGEND_PADDING_TOP+legend.height();svgElement.attr("height",newHeight);var bbox=wrap[0][0].getBBox();var delta=CS.SVG_WIDTH-CS.MARGIN-bbox.width;if(delta>0){var xTranslate=(-1*(delta/2))+CS.MARGIN;wrap.attr("transform","translate("+xTranslate+", "+(yTranslate)+")");}};return self;};Bk.Chart=Bk.Chart||{};Bk.Chart.Pie=(function(){"use strict";var self={};var CS={MARGIN:20,LEGEND_PADDING:10,TRANSITION_DURATION:1500};var _container=null;var _vis=null;var _settings=null;var _data=null;var _buildTriggerEvent=null;var _touchStartCoordinates=null;var _onOrientationChangeEventName="";var _eventListenerMap=[];function _init(settings){if(_settings===null){_settings=settings;}
_container=Bk.Dom.getElementById(_settings.id);if(!_container){console.warn("Unable to find the pie chart container with id: ["+_settings.id+"]. Aborting!");return;}
_data=_settings.data;_buildTriggerEvent=_settings.buildTriggerEvent||_buildTriggerEvent;var _parentNode=_container.parentNode;if(Bk.Dom.hasClass(_parentNode,'bk-popup')){_parentNode.style.display="block";}
CS.SVG_WIDTH=window.getComputedStyle(_container).getPropertyValue('width').replace("px","");CS.PIE_WIDTH=(CS.SVG_WIDTH>300)?300:(CS.SVG_WIDTH-CS.MARGIN);CS.PIE_HEIGHT=(CS.SVG_WIDTH>300)?300:(CS.SVG_WIDTH-CS.MARGIN);CS.PIE_RADIUS=(Math.min(CS.PIE_WIDTH,CS.PIE_HEIGHT)/2)-(CS.MARGIN);_addClickListeners();};function _build(){var arc=d3.svg.arc().outerRadius(CS.PIE_RADIUS);var donut=d3.layout.pie();_vis=d3.select(_container).append("svg:svg").data([_data]).attr("width",CS.SVG_WIDTH);var arcs=_vis.selectAll("g.arc").data(donut.value(function(d){return d.data})).enter().append("svg:g").attr("class","arc").attr("transform","translate("+(CS.SVG_WIDTH/2)+","+(CS.PIE_RADIUS+CS.MARGIN)+")");var paths=arcs.append("path").attr("fill",function(d){return d.data.color;}).attr("label",function(d){return d.data.label+" ("+d.data.data+")"}).attr("d",arc);paths.transition().duration(1500).attrTween("d",function(b){b.innerRadius=0;var i=d3.interpolate({startAngle:0,endAngle:0},b);return function(t){return arc(i(t));};});var legendData=[];for(var i=0;i<_data.length;i++){var item=_data[i];legendData[i]={label:item.label+" ("+item.data+")",color:item.color};}
var legend=d3Legend();legend.width(CS.SVG_WIDTH);var group=_vis.append("svg:g");group.datum(legendData).call(legend);var xTranslate=0;var yTranslate=CS.PIE_HEIGHT+CS.LEGEND_PADDING;var bbox=group[0][0].getBBox();var delta=CS.SVG_WIDTH-CS.MARGIN-bbox.width;if(delta>0){var xTranslate=(-1*(delta/2))+CS.MARGIN;group.attr("transform","translate("+xTranslate+", "+yTranslate+")");}
_vis.attr("height",CS.PIE_HEIGHT+legend.height()+CS.LEGEND_PADDING);if(_buildTriggerEvent&&_buildTriggerEvent.data.callback){_buildTriggerEvent.data.callback();}
Bk.Event.fireEvent(Bk.Event.BK_CHART_BUILT);};var _disable=function(path){path.removeAttribute("focus");path.setAttribute("fill-opacity","0.1");}
var _closeModal=function(){var modal=_container.querySelector(".bk-modal");if(modal!==null){modal.style.display="none";}
var paths=_container.querySelectorAll("path");for(var i=0;i<paths.length;i++){var path=paths[i];path.removeAttribute("fill-opacity");}}
var _openModal=function(path){path.setAttribute("focus","on");path.removeAttribute("fill-opacity");var modal=_container.querySelector(".bk-modal");modal.style.display="block";modal.textContent=path.getAttribute("label");modal.style.top=((CS.MARGIN+(CS.PIE_HEIGHT/2))-(modal.offsetHeight/2))+"px";modal.style.left=((modal.parentNode.offsetWidth/2)-(modal.offsetWidth/2))+"px";var paths=_container.querySelectorAll("path");for(var i=0;i<paths.length;i++){var path=paths[i];if(path.getAttribute("focus")===null){_disable(path);}}};var _handleClickEvent=function(target){if("path"===target.nodeName.toLowerCase()){if(target.getAttribute("focus")){_disable(target);_closeModal();return;}
var focus=_container.querySelector("path[focus='on']");if(focus){_disable(focus);_openModal(target);return;}
_openModal(target);return;}
var modal=Bk.Dom.findParentNodeByAttr("class","bk-modal",target);if(modal){_disable(_container.querySelector("path[focus='on']"));_closeModal();}};var _addClickListeners=function(){var iOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?true:false;if(iOS){_eventListenerMap.push({"eventName":"touchstart","eventListener":function(e){_wrapTouchEvent(e,_handleClickEvent);}});Bk(_container).life("touchstart",_eventListenerMap[_eventListenerMap.length-1].eventListener);_eventListenerMap.push({"eventName":"touchend","eventListener":function(e){_wrapTouchEvent(e,_handleClickEvent);}});Bk(_container).life("touchend",_eventListenerMap[_eventListenerMap.length-1].eventListener);}else{_eventListenerMap.push({"eventName":"click","eventListener":function(e){_handleClickEvent(e.target);}});Bk(_container).life("click",_eventListenerMap[_eventListenerMap.length-1].eventListener);}};var _removeClickListeners=function(){for(var i=0;i<_eventListenerMap.length;i++){Bk.Event.removeListener(_eventListenerMap[i].eventName,_container,_eventListenerMap[i].eventListener);}
_eventListenerMap=[];};var _onOrientationChangeHandler=function(){self.destroy();self.build();};self.destroy=function(){Bk.Event.removeListener(_onOrientationChangeEventName,window,_onOrientationChangeHandler);if(_vis){_vis[0][0].parentNode.removeChild(_vis[0][0]);}
_removeClickListeners();_closeModal();};function _react(){_onOrientationChangeEventName=Bk.Event.onOrientationChange(_onOrientationChangeHandler);Bk(document).one(Bk.Event.BK_PAGE_UNLOADED,function(){Bk.Event.removeListener(_onOrientationChangeEventName,window,_onOrientationChangeHandler);});};var _wrapTouchEvent=function(e,fct){var _getCoordinates=function(touches){return touches.clientX+"/"+touches.clientY;}
if("touchstart"===e.type){var touches=e.targetTouches[0];_touchStartCoordinates=_getCoordinates(touches);}
if("touchend"===e.type){var touches=e.changedTouches[0];if(_touchStartCoordinates===_getCoordinates(touches)){fct(e.target);}}};self.build=function(settings){setTimeout(function(){_init(settings);_build();_react();},500);};return self;});Bk.Chart=Bk.Chart||{};Bk.Chart.Bar=function(){var self={};var CS={INITIAL_MARGIN_HORIZONTAL:30,MARGIN_BOTTOM:40,MARGIN_TOP:10,TICK_LENGTH:4,BAR_VALUE_VERTICAL_OFFSET:6,X_AXIS_LABEL_MARGIN_TOP:21,Y_AXIS_LABEL_MARGIN_RIGHT:14,Y_TICK_LABEL_MARGIN_RIGHT:10,BAR_LABEL_FONT_SIZE_POSITION_CORRECTION:-5,LENGTH_BETWEEN_EACH_TICKS:80,GRAPH_TOP_PADDING:14};var _onOrientationChangeEventName=null;var _vis=null;var _data=null;var _settings=null;var _container=null;var _buildTriggerEvent=null;function _init(data,settings,event){_container=document.getElementById(settings.containerId);if(!_container){console.warn("Unable to find the bar chart container with id: ["+args.id+"]. Aborting!");return;}
var lengthOfTheLongestYValue=d3.max(data,function(datum){return(datum.data+"").length});CS.MARGIN_HORIZONTAL=(lengthOfTheLongestYValue)*5+CS.INITIAL_MARGIN_HORIZONTAL;var parentNode=_container.parentNode;if(Bk.Dom.hasClass(parentNode,'bk-popup')){parentNode.style.display="block";}
CS.SVG_WIDTH=window.getComputedStyle(parentNode).getPropertyValue('width').replace("px","")||document.body.clientWidth;CS.SVG_HEIGHT=CS.SVG_WIDTH*0.75;CS.GRAPH_WIDTH=CS.SVG_WIDTH-CS.MARGIN_HORIZONTAL*2;CS.GRAPH_HEIGHT=CS.SVG_HEIGHT-(CS.MARGIN_TOP+CS.MARGIN_BOTTOM);CS.BAR_WIDTH=(2*CS.GRAPH_WIDTH)/((3*data.length)+1);CS.FIRST_BAR_LEFT_AND_LAST_BAR_RIGHT_MARGIN=CS.BAR_WIDTH/2;CS.NB_OF_Y_TICKS=Math.round(CS.GRAPH_HEIGHT/CS.LENGTH_BETWEEN_EACH_TICKS);_data=data;_settings=settings;_buildTriggerEvent=event||_buildTriggerEvent;};function _build(data,settings){_vis=d3.select(_container).append("svg:svg").attr("width",CS.SVG_WIDTH).attr("height",CS.SVG_HEIGHT);var x=d3.scale.linear().domain([0,data.length-1]).range([CS.FIRST_BAR_LEFT_AND_LAST_BAR_RIGHT_MARGIN,CS.GRAPH_WIDTH-(CS.BAR_WIDTH+CS.FIRST_BAR_LEFT_AND_LAST_BAR_RIGHT_MARGIN)]);var max=d3.max(data,function(datum){return datum.data;});var y=d3.scale.linear().domain([0,max]).rangeRound([0,CS.GRAPH_HEIGHT-CS.GRAPH_TOP_PADDING-CS.BAR_VALUE_VERTICAL_OFFSET]);var cartesianCoor="translate("+CS.MARGIN_HORIZONTAL+", "+(CS.MARGIN_TOP+CS.GRAPH_HEIGHT)+") scale(1, -1)";var group=_vis.append("svg:g").attr("transform",cartesianCoor);group.append("svg:rect").attr("x",0).attr("y",0).attr("width",CS.GRAPH_WIDTH).attr("height",CS.GRAPH_HEIGHT).attr("style","fill:"+settings.chartbgcolor);group.selectAll(".yGrid").data(y.ticks(CS.NB_OF_Y_TICKS*2)).enter().append("svg:line").attr("y1",function(d){return y(d);}).attr("y2",function(d){return y(d);}).attr("x1",0).attr("x2",CS.GRAPH_WIDTH).attr("class","bk-chart-grid-line");group.selectAll("g").data(data).enter().append("svg:rect").attr("x",function(datum,index){return x(index);}).attr("y",0).attr("width",CS.BAR_WIDTH).attr("fill",function(datum){return datum.color;}).transition("height").duration(1000).attr("height",function(datum){return y(datum.data);});group.selectAll("g").data(data).enter().append("svg:text").text(function(datum){return(datum.data);}).attr("transform","scale(1, -1)").attr("x",function(datum,index){return x(index)+CS.BAR_WIDTH/2;}).attr("y",(-1*CS.BAR_VALUE_VERTICAL_OFFSET)).transition("x","y").duration(1000).attr("y",function(datum){return-1*(y(datum.data)+CS.BAR_VALUE_VERTICAL_OFFSET);}).attr("class","bk-chart-bar-value").attr("text-anchor","middle");var yValueArr=[];group.selectAll("xTickLabel").data(data).enter().append("svg:text").text(function(d){return d.label;}).attr("transform",function(d,index,This){var originalXValue=x(index)+(CS.BAR_WIDTH/2)+CS.BAR_LABEL_FONT_SIZE_POSITION_CORRECTION;var originalYValue=0;var bbox=this.getBBox();var textWidth=bbox.width;var textHeight=bbox.height;var x45DegOrientedTextOffset=(Math.sqrt(2)/2)*(textWidth-textHeight);var y45DegOrientedTextOffset=(Math.sqrt(2)/2)*(textWidth+textHeight);xValue=originalXValue-x45DegOrientedTextOffset;yValue=-1*(originalYValue+y45DegOrientedTextOffset);yValueArr.push(Math.abs(yValue));return"translate("+xValue+", "+yValue+")"+" rotate(45) scale(1, -1)";}).attr("class","bk-xTickLabel");_vis.attr("height",d3.max(yValueArr)+CS.SVG_HEIGHT);group.append("svg:line").attr("x1",0).attr("x2",CS.GRAPH_WIDTH).attr("y1",0).attr("y2",0).attr("class","bk-x-axis");group.append("svg:line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",CS.GRAPH_HEIGHT).attr("class","bk-x-axis");group.selectAll(".yTicks").data(y.ticks(CS.NB_OF_Y_TICKS)).enter().append("svg:line").attr("class","bk-y-ticks").attr("y1",function(d){return y(d);}).attr("y2",function(d){return y(d);}).attr("x1",0-CS.TICK_LENGTH/2).attr("x2",0+CS.TICK_LENGTH/2);var yTicksLabelMaximumLength=0;group.selectAll(".bk-yTickLabel").data(y.ticks(CS.NB_OF_Y_TICKS)).enter().append("svg:text").attr("class","bk-yTickLabel").text(String).attr("x",function(d,index,This){var bbox=this.getBBox();var textWidth=bbox.width;yTicksLabelMaximumLength=(yTicksLabelMaximumLength>=textWidth)?yTicksLabelMaximumLength:textWidth;return-1*(textWidth+CS.Y_TICK_LABEL_MARGIN_RIGHT);}).attr("y",function(d){return-1*y(d);}).attr("text-anchor","right").attr("transform","scale(1,-1)").attr("dy",4);group.append("svg:text").attr("text-anchor","middle").attr("transform","scale(1, -1)").attr("x",CS.GRAPH_WIDTH/2).attr("y",d3.max(yValueArr)+CS.X_AXIS_LABEL_MARGIN_TOP).attr("class","bk-xAxisTitle").append("svg:tspan").text(settings.xlabel);group.append("svg:text").text(settings.ylabel).attr("transform","rotate(90) scale(1, -1)").attr("x",function(){var bbox=this.getBBox();var textWidth=bbox.width;return(CS.GRAPH_HEIGHT-textWidth)/2;}).attr("y",-1*(CS.Y_AXIS_LABEL_MARGIN_RIGHT+yTicksLabelMaximumLength+CS.Y_TICK_LABEL_MARGIN_RIGHT)).attr("class","bk-yAxisTitle");var gOffset=(_vis.attr("width")-group[0][0].getBBox().width)/2;gOffset+=CS.MARGIN_HORIZONTAL;group.attr("transform","translate("+(gOffset)+", "+(CS.MARGIN_TOP+CS.GRAPH_HEIGHT)+") scale(1, -1)");if(_buildTriggerEvent&&_buildTriggerEvent.data.callback){_buildTriggerEvent.data.callback();}
Bk.Event.fireEvent(Bk.Event.BK_CHART_BUILT);};function _onOrientationChangeHandler(){self.destroy();self.build(_data,_settings);};function _react(){_onOrientationChangeEventName=Bk.Event.onOrientationChange(_onOrientationChangeHandler);Bk(document).one(Bk.Event.BK_PAGE_UNLOADED,function(){Bk.Event.removeListener(_onOrientationChangeEventName,window,_onOrientationChangeHandler);});};self.build=function(data,settings,e){setTimeout(function(){_init(data,settings,e);_build(data,settings);_react();},500);};self.destroy=function(){Bk.Event.removeListener(_onOrientationChangeEventName,window,_onOrientationChangeHandler);if(_vis){_vis[0][0].parentNode.removeChild(_vis[0][0]);}};return self;};Bk.Prefetch=(function(){"use strict";var self={};function _init(context,links){var linksArray=links.split('|bk|');for(var i=0;i<linksArray.length;i++){var link=linksArray[i];Bk.Ajax.fetch({url:link.indexOf("/")===0?link:context+link,method:'get',checkResponse:false,beforeSend:function(xhr){xhr.setRequestHeader('x-bk-prefetch','true');if(xhr.overrideMimeType){xhr.overrideMimeType('application/xml');}},onSuccess:function(){},onTimeout:function(){},onError:function(){},onCustomError:function(){}});}}
self.init=function(context,links){_init(context,links);};return self;}());Bk.Util.hideURLBar();if(document.documentElement["getBoundingClientRect"])(function(){Bk.offset=function(elt){if(!elt){return{top:0,left:0};}
if(elt===elt.ownerDocument.body){console.warn("We do not handle offset.bodyOffset");return{top:0,left:0};}
Bk.animation._supportInitialized||Bk.animation._initializeSupport();var box=elt.getBoundingClientRect(),doc=elt.ownerDocument,win=Bk.Util.getWindow(doc),body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(win.pageYOffset||Bk.boxModel&&docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(win.pageXOffset||Bk.boxModel&&docElem.scrollLeft||body.scrollLeft)-clientLeft;return{top:top,left:left};};})();})();Bk.automaticTransition=function(source){var t={type:'swap',ajax:'true',from:Bk.Body.id,to:Bk.Body.id,loader:'bk-main-loader',source:source};if('a'===source.nodeName.toLowerCase()){t.animation=source.getAttribute("data-bk-animation")||"fade";}else if('input'===source.nodeName.toLowerCase()){t.animation=source.getAttribute("data-bk-animation")||"fade";}
Bk.transition(t);};Bk.transition=function(items,back){if(Bk.Event.Delegator.getLock()){return;}
var _items=[],_back=(typeof back==='undefined')?false:true,_url=null,_anchor=null,_historize='false',_counter=0;if(items instanceof Array){for(var i=0;i<items.length;i++){var item=items[i];if(item.animation&&item.animation.indexOf("parallax")>=0&&!back){var parallax=document.getElementById('bk-parallax');if(parallax){var parallaxStyle=parallax.style;var transformPropName=Wopernizr.detect('transform');if(parallaxStyle[transformPropName]){var oldTranslate=parallaxStyle[transformPropName].match(/(\((.+)px, 0px, 0px\))/)[2];item.oldTranslate=oldTranslate;}}}}
_items=items;}else if(items instanceof Object){_items.push(items);}
var onBkTransitionItemCompleted=function(){_counter++;if(_counter===_items.length){if(_anchor!==null){Bk.Util.scrollTo(_anchor);}else{Bk.Util.hideURLBar();}
Bk.Event.fireEvent(Bk.Event.BK_TRANSITIONS_COMPLETED,{items:_items,back:_back,anchor:_anchor,historize:_historize,url:_url});}}
Bk.Event.fireEvent(Bk.Event.BK_TRANSITIONS_STARTED,{"source":_items[0].source});for(var i=0,j=_items.length;i<j;i++){var item=_items[i];if(item.anchor){_anchor=item.anchor;}
if(item.type==="swap"){var swap=new SwapTransition(item);if(item.ajax==='true'||item.historize==='true'||(item.animation&&item.animation.indexOf("parallax")>=0)){_historize='true';}
_url=swap.getUrl();swap.process({"onBkTransitionItemCompleted":onBkTransitionItemCompleted});}else if(item.type==="toggle"){var toggle=new ToggleTransition(item);toggle.process({"onBkTransitionItemCompleted":onBkTransitionItemCompleted});}}};function ToggleTransition(data){var self=this;self.data=data;self.section=Bk('#'+data.id).get();self.transitionendEventName=Wopernizr.whichTransitionEvent();var _foldInPage=function(fold,transitionStartCallback,onBkTransitionItemCompleted){Bk.animation.registerNodeInTransition(self.transitionendEventName,self.section);var newBoxStyle=self.section.style;var backupDisplay=newBoxStyle.display;if(!fold){newBoxStyle.position="relative";newBoxStyle.left=(2*window.innerWidth)+"px";newBoxStyle.display="block";}
var height=parseInt(getComputedStyle(self.section,null).height,10);if(!fold){newBoxStyle.height="0";newBoxStyle.display=backupDisplay;}else{newBoxStyle.height=(fold)?height+"px":"";}
if(transitionStartCallback){transitionStartCallback(self.section);}
var newBoxTransitionEndCB=function(evt){var box=evt.target;Bk.Dom.removeClass(box,"bk-fold");box.style.height="";if(onBkTransitionItemCompleted){onBkTransitionItemCompleted();}};Bk(self.section).one(self.transitionendEventName,newBoxTransitionEndCB);Bk.Event.createAndDispatchEvent("transitionEndListenerReady");Bk.animation.listenToCreateLocationTimer(self.transitionendEventName,self.section);var transitionStart=function(aNewBox,aFold){Bk.Dom.addClass(aNewBox,"bk-fold");var boxStyle=aNewBox.style;if(aFold){boxStyle.height="0px";}else{boxStyle.position="";boxStyle.left="";boxStyle.height=height+"px";}};window.requestAnimationFrame(function(){transitionStart(self.section,fold);});};self.process=function(args){var computedStyle=getComputedStyle(self.section,null);var display="";if(computedStyle){display=computedStyle.getPropertyValue("display");}
if(!self.transitionendEventName){if(display==="none"){Bk.Dom.showInPage(self.section);}else{Bk.Dom.hideInPage(self.section);}
return;}
if(display==="none"){if(self.data.animated===false){Bk.Dom.showInPage(self.section);args.onBkTransitionItemCompleted();}else{_foldInPage(false,Bk.Dom.showInPage,args.onBkTransitionItemCompleted);}}else{if(self.data.animated===false){Bk.Dom.hideInPage(self.section);args.onBkTransitionItemCompleted();}else{_foldInPage(true,null,function(){Bk.Dom.hideInPage(self.section);args.onBkTransitionItemCompleted();});}}};}function SwapTransition(data){"use strict";var self=this;self.data=data;(function(){var source=self.data.source;if(source){if('input'===source.nodeName.toLowerCase()){var form=Bk.Dom.findParentNode("form",source);if(!self.data.url){self.data.url=Bk(form).attr('action');}
self.data.method=Bk(form).attr('method');self.data.data=Bk.Form.buildXHRData(form,source);self.data.submitOnBack=Bk.Form.doSubmitOnBack(source);self.data.preserveMethodOnBack=Bk.Form.doPreserveMethodOnBack(form);if(!self.data.preserveMethodOnBack){self.data.preserveMethodOnBack=Bk.Form.doPreserveMethodOnBack(source);}}
if('form'===source.nodeName.toLowerCase()){if(!self.data.url){self.data.url=Bk(source).attr('action');}
self.data.method=Bk(source).attr('method');self.data.data=Bk.Form.buildXHRData(source);self.data.preserveMethodOnBack=Bk.Form.doPreserveMethodOnBack(source);}
if('a'===source.nodeName.toLowerCase()&&self.data.ajax==='true'){if(source.href){self.data.url=Bk(source).attr('href');}}}})();var _validate=function(){if(!self.data.from){var err='The <b>from</b> section is undefined';console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err});return false;}
self.from=Bk('#'+self.data.from);if(self.from===null){var err="The section <b>"+self.data.from+"</b> does not exist in the current document.";console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err});return false;}
if(!self.data.to){var err='The <b>to</b> section is not defined';console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err});return false;}
if(!self.data.url){self.to=Bk('#'+self.data.to);if(self.to===null){var err="The section <b>"+self.data.to+"</b> does not exist in the current document.";console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err});return false;}}
if(self.data.loader){self.loader=Bk('#'+self.data.loader);if(self.loader===null){var err="The section <b>"+self.data.loader+"</b> does not exist in the current document.";console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err});return false;}}
return true;};var _getFromElement=function(){return self.from.get();};var _animate=function(from,to,animationName,onBkTransitionItemCompleted,newLoaderEle){var animationFn=Bk.animation.impl(animationName);setTimeout(function(){animationFn({"oldBox":from,"newBox":to,"data":self.data,"oldBoxTransitionEnd":function(){Bk.Loader.update(newLoaderEle);if(onBkTransitionItemCompleted){onBkTransitionItemCompleted();}}});},1);};var _doRemoteTransitionAndNotify=function(args){Bk.Event.fireBkPageUnloaded();var url=self.data.url;if(url.indexOf("?")==-1){url+=window.location.search;}
Bk.ajax(url,{"type":self.data.method,"data":self.data.data,"dataType":"XML","beforeSend":function(xhr){Bk.Ajax.expectXML(xhr);if(wopeSettings.IS_HYBRID===true){xhr.setRequestHeader("X-Bk-Hybrid","true");}},"success":function(data,xhr){_checkResponse({"xhr":xhr,"onBkTransitionItemCompleted":args.onBkTransitionItemCompleted})},"error":function(xhr){_onError({"xhr":xhr,"onBkTransitionItemCompleted":args.onBkTransitionItemCompleted});},"timeout":function(xhr){_onError({"xhr":xhr,"onBkTransitionItemCompleted":args.onBkTransitionItemCompleted});}});};var _checkResponse=function(args){var str=args.xhr.responseText;var reg=new RegExp('^\\s*$');var isblank=(!str||reg.test(str));var remoteDocument=Bk.Ajax.getXMLResponse(args.xhr);if(!isblank){if(window.ActiveXObject&&args.xhr.responseXML.xml){var strIE9=args.xhr.responseXML.xml;isblank=!strIE9||reg.test(strIE9);}else{isblank=!remoteDocument;}}
if(isblank){console.warn("✘ Empty ajax response.");_onError(args,remoteDocument);}else if(_isResponseContentTypeAllowed(args.xhr)){if(Bk.Dom.getElementById(self.data.to,remoteDocument)!==null){_onSuccess(args,remoteDocument);}else{var err="The section <b>"+self.data.to+"</b> does not exist in the remote document.";console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err});return;}}else{_onError(args,remoteDocument);}};var _isResponseContentTypeAllowed=function(xhr){if(window.cordova){return true;}else{var ctype=xhr.getResponseHeader("Content-type");return ctype&&(ctype.indexOf("text/html")==0||ctype.indexOf("application/xml")==0);}};var _onSuccess=function(args,remoteDocument){Bk.Event.fireEvent(Bk.Event.BK_REMOTE_DOCUMENT_RETRIEVED,{remoteDocument:remoteDocument});Bk(document).one(Bk.Event.BK_SCRIPTS_LOADED,function(){_copyHtmlAttributes(remoteDocument);_copyBodyAttributes(remoteDocument);Bk.Header.update(remoteDocument);Bk.Footer.update(remoteDocument);var newLoaderEle=Bk.Dom.importElement(remoteDocument,Bk.Loader.getId());var fromElement=null;if(self.data.loader){fromElement=self.loader.get();}else{fromElement=self.from.get();}
var toElement=Bk.Dom.importElement(remoteDocument,self.data.to);if(toElement===null){return _onError({message:"The section '"+self.data.to+"' does not exist in the remote document."});}
var overrided=Bk.Dom.dataFromClass(toElement,"bk-to-");if(overrided){self.data.to=overrided;toElement=Bk.Dom.importElement(remoteDocument,overrided);}
var callback=function(){var oldBox=self.from.get();if(oldBox&&oldBox.parentNode){oldBox.parentNode.removeChild(oldBox);}
if(typeof args.onBkTransitionItemCompleted!=='undefined'){args.onBkTransitionItemCompleted();}};_animate(fromElement,toElement,self.data.animation,callback,newLoaderEle);});Bk.Head.updateAndNotify(remoteDocument);};var _onError=function(args,remoteDocument){remoteDocument=remoteDocument||Bk.Ajax.getXMLResponse(args.xhr);if(remoteDocument!==null&&Bk("#bk-body",remoteDocument)!==null&&!Bk.Debug.isEnabled()){return _onSuccess(args,remoteDocument);}
Bk.Head.updateAndNotify();Bk(_getFromElement()).show();var callback=function(){if(args.message){console.warn(args.message);Bk.Debug.displayAjaxFailureMessage({"message":args.message});}else if(args.xhr.status===0){var err="A timeout error while fetching url "+self.data.url+". Target application took more than "+Bk.Ajax.getTimeOut()+" milliseconds to respond";console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err});}else if(args.xhr.status!==200){var err="server error while fetching url "+self.data.url+" (status code: "+args.xhr.status+")";if(args.xhr.status===0){err+=". HTTP status code is not available, either the remote server did not respond or its url has not been whitelisted.";}
console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err,"xhr":args.xhr});}else{var mime=args.xhr.getResponseHeader("Content-Type");var err="wope expected to receive an XML response from target application (Current content-type is: "+mime+")";if(mime===Bk.CS.APPLICATION_XML){err+="<br />Please, check the response content too.";}
console.warn(err);Bk.Debug.displayAjaxFailureMessage({"message":err,"xhr":args.xhr});}
Bk.Event.fireEvent(Bk.Event.BK_PAGE_LOAD_REQUEST_FAILED,{xhr:args.xhr});if(typeof args.onBkTransitionItemCompleted!=='undefined'){args.onBkTransitionItemCompleted();}};_animate(self.loader.get(),_getFromElement(),null,callback);};var _copyHtmlAttributes=function(remoteDocument){var currentHtml=document.getElementsByTagName('html')[0];var currentManifest=currentHtml.getAttribute("manifest");var remoteHtml=remoteDocument.getElementsByTagName('html')[0];var remoteManifest=remoteHtml.getAttribute("manifest");if(remoteManifest){currentHtml.setAttribute("manifest",remoteManifest);}else if(currentManifest){currentHtml.removeAttribute("manifest");}};var _copyBodyAttributes=function(remoteDocument){var currentBody=document.getElementsByTagName('body')[0];var remoteBody=remoteDocument.getElementsByTagName('body')[0];currentBody.setAttribute("style",remoteBody.getAttribute("style")||"");currentBody.setAttribute("class",remoteBody.getAttribute("class")||"");Bk.Dom.cleanStyle(currentBody);};self.getUrl=function(){return self.data.url;}
self.process=function(args){if(_validate()===false){return;}
if(self.loader){var fromElement=_getFromElement();var loaderElement=self.loader.get();Bk.Loader.updateHeightProp(loaderElement);var animationFn=Bk.animation.impl(Bk.CS.ANIMATION_NAME.NONE);animationFn({"oldBox":fromElement,"newBox":loaderElement});}
if(self.data.url){_doRemoteTransitionAndNotify(args);}else{_animate(self.from.get(),self.to.get(),self.data.animation,args.onBkTransitionItemCompleted);}};}
Bk.FadeAnimation=function(args){var self=this;self.oldBox=args.oldBox;self.newBox=args.newBox;self.oldBoxTransitionEnd=args.oldBoxTransitionEnd;self.newBoxTransitionEnd=args.newBoxTransitionEnd;var transitionendEventName=Wopernizr.whichTransitionEvent();var isRemoteElement=self.newBox.parentNode?false:true;var playWithoutAnimation=function(){var noneAnimation=new Bk.NoneAnimation(args);noneAnimation.play();};var playWithAnimation=function(){self.newBox.style.opacity="0";self.newBox.style.display="block";Bk.animation.registerNodeInTransition(transitionendEventName,self.oldBox,self.newBox);if(!self.oldBox.parentNode){console.info("No parent node, abort fade transition");return;}
Bk.Dom.addClass(self.oldBox,"bk-fade");Bk.Dom.addClass(self.newBox,"bk-fade");self.oldBox.parentNode.insertBefore(self.newBox,self.oldBox.nextSibling);if(isRemoteElement){Bk.animation.fireBkNodeLoaded(self.newBox);}
var _startTransition=function(aOldBox,aNewBox){var oldBoxOpacityNewValue=0;var newBoxOpacityNewValue=1;if(aOldBox.style.opacity===oldBoxOpacityNewValue){var msg='bk-fade class has a transition-property opacity\n'+'and the new value of the opacity is the same as the old one\n'+'which means you will not receive a webkitTransitionEnd event for oldBox \n';console.warn(msg);}
if(aNewBox.style.opacity===newBoxOpacityNewValue){var msg='bk-fade class has a transition-property opacity\n'+'and the new value of the opacity is the same as the old one\n'+'which means you will not receive a webkitTransitionEnd event for newBox \n';console.warn(msg);}
aOldBox.style.opacity=oldBoxOpacityNewValue;aNewBox.style.opacity=newBoxOpacityNewValue;};var _onBothBoxesTransitionEnd=function(evt){var box=evt.target;Bk.Dom.removeClass(box,"bk-fade");box.style.opacity="";Bk.Dom.cleanClass(box);Bk.Dom.cleanStyle(box);if(box===self.oldBox){box.style.display="none";}};Bk(self.oldBox).one(transitionendEventName,self.oldBoxTransitionEnd);Bk(self.oldBox).one(transitionendEventName,_onBothBoxesTransitionEnd);Bk(self.newBox).one(transitionendEventName,self.newBoxTransitionEnd);Bk(self.newBox).one(transitionendEventName,_onBothBoxesTransitionEnd);Bk.animation.makeBoxAbsolute(self.oldBox,self.newBox,transitionendEventName);_startTransition(self.oldBox,self.newBox);Bk.animation.listenToCreateLocationTimer(transitionendEventName,self.newBox);};self.play=function(){if(transitionendEventName){playWithAnimation();}else{playWithoutAnimation();}};return self;};Bk.FlipAnimation=function(args){var self=this;self.oldBox=args.oldBox;self.newBox=args.newBox;self.isBackwards=args.isBackwards;self.oldBoxTransitionEnd=args.oldBoxTransitionEnd;self.newBoxTransitionEnd=args.newBoxTransitionEnd;var transitionEndEventName=Wopernizr.whichTransitionEvent();var isRemoteElement=self.newBox.parentNode?false:true;var playWithoutAnimation=function(){var noneAnimation=new Bk.NoneAnimation(args);noneAnimation.play();};var playWithAnimation=function(){var oldBoxStyle=self.oldBox.style;var newBoxStyle=self.newBox.style;if(!self.isBackwards){Bk.Dom.addClass(self.oldBox,"bk-front bk-rotate");Bk.Dom.addClass(self.newBox,"bk-back bk-rotate");}else{Bk.Dom.addClass(self.oldBox,"bk-back  bk-rotate bk-flip");Bk.Dom.addClass(self.newBox,"bk-front bk-rotate bk-flip");}
if(isRemoteElement){self.oldBox.parentNode.insertBefore(self.newBox,self.oldBox.nextSibling);Bk.animation.fireBkNodeLoaded(self.newBox);}
newBoxStyle.display="block";Bk.animation.makeBoxAbsolute(self.oldBox,self.newBox,transitionEndEventName);window.requestAnimationFrame(function(){Bk.Dom.toggleClass(self.oldBox,"bk-flip");Bk.Dom.toggleClass(self.newBox,"bk-flip");});var transitionEndCB=function(evt){var box=evt.target;console.log("transitionEndCB box.id="+box.id);box.removeAttribute('style');Bk.Dom.removeClass(box,"bk-rotate");if(box===self.oldBox){box.style.display="none";}};Bk(self.oldBox).one(transitionEndEventName,transitionEndCB);Bk(self.newBox).one(transitionEndEventName,transitionEndCB);if(self.oldBoxTransitionEnd){Bk(self.oldBox).one(transitionEndEventName,self.oldBoxTransitionEnd)}
if(self.newBoxTransitionEnd){Bk(self.newBox).one(transitionEndEventName,self.newBoxTransitionEnd);}};self.play=function(){if(transitionEndEventName){playWithAnimation();}else{playWithoutAnimation();}};return self;};Bk.NoneAnimation=function(args){var self=this;self.oldBox=args.oldBox;self.newBox=args.newBox;self.oldBoxTransitionEnd=args.oldBoxTransitionEnd;self.newBoxTransitionEnd=args.newBoxTransitionEnd;var isRemoteElement=self.newBox.parentNode?false:true;self.play=function(){Bk.Dom.showInPage(self.newBox);self.oldBox.parentNode.insertBefore(self.newBox,self.oldBox.nextSibling);self.oldBox.style.display="none";if(self.oldBoxTransitionEnd){self.oldBoxTransitionEnd({target:self.oldBox});}
if(self.newBoxTransitionEnd){self.newBoxTransitionEnd({target:self.newBox});}
if(isRemoteElement){Bk.animation.fireBkNodeLoaded(self.newBox);}};return self;};Bk.SlideAnimation=function(args){var self=this;self.oldBox=args.oldBox;self.newBox=args.newBox;self.isBackwards=args.isBackwards;self.oldBoxTransitionEnd=args.oldBoxTransitionEnd;self.newBoxTransitionEnd=args.newBoxTransitionEnd;self.data=args.data;var isRemoteElement=self.newBox.parentNode?false:true;var transitionendEventName=Wopernizr.whichTransitionEvent();var transformPropName=Wopernizr.detect('transform');var playWithoutAnimation=function(){var noneAnimation=new Bk.NoneAnimation(args);noneAnimation.play();};var playWithAnimation=function(args){Bk.Dom.showInPage(self.newBox);Bk.animation.registerNodeInTransition(transitionendEventName,self.oldBox,self.newBox);if(!self.oldBox.parentNode){console.warn("No parent node, abort slide transition");return;}
var slideWidth=self.oldBox.clientWidth;self.newBox.style[transformPropName]="translateX("+(self.isBackwards?-slideWidth:slideWidth)+"px)";if(args.animationName.indexOf("parallax")>=0){Bk.Dom.addClass(self.oldBox,"bk-slide-parallax");Bk.Dom.addClass(self.newBox,"bk-slide-parallax");}else{Bk.Dom.addClass(self.oldBox,"bk-slide");Bk.Dom.addClass(self.newBox,"bk-slide");}
var _newBox=self.newBox.cloneNode(true);if(!isRemoteElement&&(self.newBox!==self.oldBox)){self.newBox.parentNode.removeChild(self.newBox);}
self.oldBox.parentNode.insertBefore(_newBox,self.oldBox.nextSibling);if(isRemoteElement){Bk.animation.fireBkNodeLoaded(_newBox);}
Bk.animation.makeBoxAbsolute(self.oldBox,_newBox,transitionendEventName);var _startTransition=function(aOldBoxStyle,aNewBoxStyle,aSlideWidth){var oldBoxWebkitTransformNewValue="translateX("+aSlideWidth+"px)";var newBoxWebkitTransformNewValue="translateX(0)";if(args.animationName.indexOf("parallax")>=0){var direction=-1;if(args.animationName===Bk.CS.ANIMATION_NAME.PARALLAX_BACKWARDS){direction=1;}
var parallax=document.getElementById('bk-parallax');if(parallax){window.requestAnimationFrame(function(){Bk.Parallax.animate(parallax,self.data.isBack,parseInt(self.data.oldTranslate),self.data.translate,direction);});}}
if(aOldBoxStyle[transformPropName]===oldBoxWebkitTransformNewValue){var msg='bk-slide class has a transition-property -webkit-transform \n'+'and the new value of the -webkit-transform is the same as the old one\n'+'which means you will not receive a webkitTransitionEnd event for oldBox \n';console.warn(msg);}
if(aNewBoxStyle[transformPropName]===newBoxWebkitTransformNewValue){var msg='bk-slide class has a transition-property -webkit-transform\n'+'and the new value of the -webkit-transform is the same as the old one\n'+'which means you will not receive a webkitTransitionEnd event for newBox \n';console.warn(msg);}
aOldBoxStyle[transformPropName]=oldBoxWebkitTransformNewValue;aNewBoxStyle[transformPropName]=newBoxWebkitTransformNewValue;};var _bothBoxesTransitionEndCallBack=function(evt){var box=evt.target;Bk.Dom.removeClass(box,"bk-slide bk-slide-parallax");box.style[transformPropName]="";Bk.Dom.cleanClass(box);Bk.Dom.cleanStyle(box);}
var _oldBoxtransitionEndCallback=function(evt){var _oldBox=evt.target;_oldBox.removeEventListener(evt.type,arguments.callee,false);_oldBox.style.display="none";if(self.oldBoxTransitionEnd){if(args.animationName&&args.animationName.indexOf("parallax")>=0){window.requestAnimationFrame(function(){self.oldBoxTransitionEnd(evt);});}else{self.oldBoxTransitionEnd(evt);}}};Bk(self.oldBox).one(transitionendEventName,_oldBoxtransitionEndCallback);Bk(self.oldBox).one(transitionendEventName,_bothBoxesTransitionEndCallBack);Bk(_newBox).one(transitionendEventName,self.newBoxTransitionEnd);Bk(_newBox).one(transitionendEventName,_bothBoxesTransitionEndCallBack);_startTransition(self.oldBox.style,_newBox.style,(self.isBackwards?slideWidth:-slideWidth));Bk.animation.listenToCreateLocationTimer(transitionendEventName,_newBox);};self.play=function(){if(!transformPropName||"msTransform"===transformPropName){playWithoutAnimation(args);}else{playWithAnimation(args);}};return self;};if(typeof Array.prototype.filter!=="function"){Array.prototype.filter=function(fn,thisp){if(this===null)throw new TypeError;if(typeof fn!=="function")throw new TypeError;var result=[];for(var i=0;i<this.length;i++){if(i in this){var val=this[i];if(fn.call(thisp,val,i,this)){result.push(val);}}}
return result;};}
Array.prototype.remove=function(from,to){var rest=this.slice((to||from)+1||this.length);this.length=from<0?this.length+from:from;return this.push.apply(this,rest);};Element.prototype.hasClass=function(className){var reg=new RegExp('(\\s|^)'+className+'(\\s|$)');return reg.test(this.className);}
Element.prototype.addClass=function(className){if(this.hasClass(className)===false){this.className+=" "+className;}}
Element.prototype.removeClass=function(className){if(this.hasClass(className)===true){var reg=new RegExp('(\\s|^)'+className+'(\\s|$)');this.className=this.className.replace(reg,' ');}}
Element.prototype.toggleClass=function(className){if(this.hasClass(className)===true){this.removeClass(className);}else{this.addClass(className);}
if(Bk.Util.isEmpty(this.className)){this.removeAttribute("class");}}
if(window.ActiveXObject)(function(){(function(f){window.setTimeout=f(window.setTimeout);window.setInterval=f(window.setInterval);})
(function(f){return function(c,t){var a=[].slice.call(arguments,2);return f(function(){c.apply(this,a);},t);};});});if(typeof"".trim==="undefined"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");}}
(function(){var lastTime=0;var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame'];}
if(!window.requestAnimationFrame)
window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};if(!window.cancelAnimationFrame)
window.cancelAnimationFrame=function(id){clearTimeout(id);};}());(function(){if(!window.JSON){window.JSON={};if(!window.JSON.parse){window.JSON.parse=function(data){var rvalidchars=/^[\],:{}\s]*$/;var rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;var rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g;var rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g;if(!data||typeof data!=="string"){return null;}
if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))();}};}}})();document.addEventListener("deviceready",function(){if(window.cordova){Bk.Util.setCookie(Bk.CS.COOKIE.BK_HYBRID,"true",3650);}});if(window.wopeSettings.IS_HYBRID){Bk(document).one(Bk.Event.BK_PAGE_LOADED,function(){Bk.Util.setCookie(Bk.CS.COOKIE.BK_HYBRID,"true",3650);});}
